{"version":3,"sources":["main.js","action-response.js","ajax.js","alerts.js","buttons.js","confirm.js","csrf.js","dependencies.js","dom-helpers.js","dropzone.js","form-restore.js","form-stages.js","links.js","nav.js","utilities.js","validation/custom-validators.js","validation/form-validation.js","validation/parsley-config.js","validation/validation-messages.js","components/chart/js/chart.js","components/chart/js/geo-chart.js","components/chart/js/graph-chart.js","components/chart/js/pie-chart.js","components/field/checkbox-group/script.js","components/field/checkbox/script.js","components/table/js/reorder.js","components/table/js/table.js","components/field/date-or-time/script.js","components/field/dropzone/script.js","components/field/inner-form/script.js","components/field/colour/script.js","components/field/inner-module/script.js","components/field/list-of-fields/script.js","components/field/map/script.js","components/field/money/script.js","components/field/number/script.js","components/field/multiselect/script.js","components/field/radio-group/script.js","components/field/string/script.js","components/field/table-of-fields/script.js","components/field/wysiwyg/script.js","components/field/textarea/script.js","components/field/select/script.js","components/form/js/label.js","components/form/js/stages.js","components/form/js/submit.js","components/form/js/validation.js","components/widget/js/action.js","package/module/dashboard/js/file-tree.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/HA;AACA;AACA;ACFA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["window.Dms = {\r\n    config: {\r\n        // @see /resources/views/partials/js-config.blade.php\r\n    },\r\n    global: {\r\n        initialize: function (element) {\r\n            $.each(Dms.global.initializeCallbacks, function (index, callback) {\r\n                callback(element);\r\n            });\r\n        },\r\n        initializeCallbacks: []\r\n    },\r\n    action: {\r\n        responseHandler: null // @see ./services/action-response.js\r\n    },\r\n    alerts: {\r\n        add: null // @see ./services/alerts.js\r\n    },\r\n    ajax: {\r\n        interceptors: []\r\n        // @see ./services/ajax.js\r\n    },\r\n    form: {\r\n        initialize: function (element) {\r\n            var callbacks = Dms.form.initializeCallbacks.concat(Dms.form.initializeValidationCallbacks);\r\n\r\n            $.each(callbacks, function (index, callback) {\r\n                callback(element);\r\n            });\r\n        },\r\n        stages: {}, // @see ./services/form-stages.js\r\n        validation: {}, // @see ./services/validation/form-validation.js\r\n        initializeCallbacks: [],\r\n        initializeValidationCallbacks: []\r\n    },\r\n    table: {\r\n        initialize: function (element) {\r\n            $.each(Dms.table.initializeCallbacks, function (index, callback) {\r\n                callback(element);\r\n            });\r\n        },\r\n        initializeCallbacks: []\r\n    },\r\n    chart: {\r\n        initialize: function (element) {\r\n            $.each(Dms.chart.initializeCallbacks, function (index, callback) {\r\n                callback(element);\r\n            });\r\n        },\r\n        initializeCallbacks: []\r\n    },\r\n    widget: {\r\n        initialize: function (element) {\r\n            $.each(Dms.widget.initializeCallbacks, function (index, callback) {\r\n                callback(element);\r\n            });\r\n        },\r\n        initializeCallbacks: []\r\n    },\r\n    utilities: {} // @see ./services/utilities.js\r\n};\r\n\r\n$(document).ready(function () {\r\n    Dms.global.initialize($(document));\r\n    Dms.form.initialize($(document));\r\n    Dms.table.initialize($(document));\r\n    Dms.chart.initialize($(document));\r\n    Dms.widget.initialize($(document));\r\n});","Dms.action.responseHandler = function (httpStatusCode, actionUrl, response) {\r\n    if (typeof response.redirect !== 'undefined') {\r\n        if (typeof response.message !== 'undefined') {\r\n            Cookies.set('dms-flash-alert', {\r\n                message: response.message,\r\n                type: response.message_type || 'success'\r\n            });\r\n        }\r\n\r\n        window.location.href = response.redirect;\r\n        return;\r\n    }\r\n\r\n    if (typeof response.message !== 'undefined') {\r\n        Dms.alerts.add(response.message_type || 'success', response.message);\r\n    }\r\n\r\n    if (typeof response.files !== 'undefined') {\r\n        var fileNames = [];\r\n\r\n\r\n        $.each(response.files, function (index, file) {\r\n            fileNames.push(file.name);\r\n        });\r\n\r\n\r\n        swal({\r\n            html: true,\r\n            title: \"Downloading files\",\r\n            text: \"Please wait while your download begins.\\r\\n Files: \" + fileNames.join(', '),\r\n            type: \"info\",\r\n            showConfirmButton: false,\r\n            showLoaderOnConfirm: true\r\n        });\r\n\r\n        $.each(response.files, function (index, file) {\r\n            $('<iframe />')\r\n                .attr('src', Dms.config.routes.downloadFile(file.token))\r\n                .css('display', 'none')\r\n                .appendTo($(document.body));\r\n        });\r\n\r\n        var downloadsBegun = 0;\r\n        var checkIfDownloadsHaveBegun = function () {\r\n\r\n            $.each(response.files, function (index, file) {\r\n                var fileCookieName = 'file-download-' + file.token;\r\n\r\n                if (Cookies.get(fileCookieName)) {\r\n                    downloadsBegun++;\r\n                    Cookies.remove(fileCookieName)\r\n                }\r\n            });\r\n\r\n            if (downloadsBegun < response.files.length) {\r\n                setTimeout(checkIfDownloadsHaveBegun, 100);\r\n            } else {\r\n                swal.close();\r\n            }\r\n        };\r\n\r\n        checkIfDownloadsHaveBegun();\r\n    }\r\n};","Dms.ajax.formData = function (form) {\r\n    var formValues = {};\r\n    var nativeFormData = new FormData(form);\r\n\r\n    this.getNativeFormData = function () {\r\n        return nativeFormData;\r\n    };\r\n\r\n    this.append = function (name, value, filename) {\r\n        if (typeof formValues[name] === 'undefined') {\r\n            formValues[name] = [];\r\n        }\r\n\r\n        formValues[name].push({\r\n            value: value,\r\n            filename: filename\r\n        });\r\n\r\n        if (typeof filename !== 'undefined') {\r\n            nativeFormData.append(name, value, filename);\r\n        } else {\r\n            nativeFormData.append(name, value);\r\n        }\r\n\r\n        return nativeFormData;\r\n    };\r\n\r\n    this.getFormValues = function () {\r\n        return formValues;\r\n    };\r\n\r\n    this.toQueryString = function () {\r\n        var params = [];\r\n\r\n        $.each(formValues, function (name, entries) {\r\n            $.each(entries, function (index, entry) {\r\n                params.push({name: name, value: entry.value});\r\n            });\r\n        });\r\n\r\n        return $.param(params);\r\n    };\r\n};\r\n\r\nDms.ajax.createFormData = function (form) {\r\n    return new Dms.ajax.formData(form);\r\n};\r\n\r\nDms.ajax.convertResponse = function (dataType, response) {\r\n    if (dataType === 'json') {\r\n        return JSON.parse(response);\r\n    } else if (dataType === 'xml') {\r\n        return $.parseXML(dataType);\r\n    }\r\n\r\n    return response;\r\n};\r\n\r\nDms.ajax.parseData = function (data) {\r\n    if (typeof data === 'undefined' || data === null) {\r\n        return [];\r\n    }\r\n\r\n    if (data instanceof Dms.ajax.formData) {\r\n        return data.getFormValues();\r\n    }\r\n\r\n    var dataMap = {};\r\n\r\n    var queryString = $.param(data);\r\n    $.each(queryString.split('&'), function (index, parameter) {\r\n        var parts = parameter.split('=');\r\n        var name = decodeURIComponent(parts[0].replace(/\\+/g, '%20'));\r\n        if (typeof dataMap[name] === 'undefined') {\r\n            dataMap[name] = [];\r\n        }\r\n\r\n        dataMap[name].push({value: decodeURIComponent(parts[1].replace(/\\+/g, '%20'))});\r\n    });\r\n\r\n    return dataMap;\r\n};\r\n\r\nDms.ajax.createRequest = function (options) {\r\n    var filteredInterceptors = [];\r\n\r\n    $.each(Dms.ajax.interceptors, function (index, interceptor) {\r\n        if (typeof interceptor.accepts !== 'function' || interceptor.accepts(options)) {\r\n            filteredInterceptors.push(interceptor);\r\n        }\r\n    });\r\n\r\n    $.each(filteredInterceptors, function (index, interceptor) {\r\n        if (typeof interceptor.before === 'function') {\r\n            interceptor.before(options);\r\n        }\r\n    });\r\n\r\n    var callAfterInterceptors = function (response, data) {\r\n        $.each(filteredInterceptors.reverse(), function (index, interceptor) {\r\n            if (typeof interceptor.after === 'function') {\r\n                var returnValue = interceptor.after(options, response, data);\r\n\r\n                if (typeof returnValue !== 'undefined') {\r\n                    data = returnValue;\r\n                }\r\n            }\r\n        });\r\n\r\n        return data;\r\n    };\r\n\r\n    var responseData;\r\n\r\n    var originalErrorCallback = options.error;\r\n    options.error = function (jqXHR, textStatus, errorThrown) {\r\n        callAfterInterceptors(jqXHR);\r\n\r\n        if (originalErrorCallback) {\r\n            return originalErrorCallback.apply(this, arguments);\r\n        }\r\n    };\r\n\r\n    var originalSuccessCallback = options.success;\r\n    options.success = function (data, textStatus, jqXHR) {\r\n        responseData = data = callAfterInterceptors(jqXHR, data);\r\n\r\n        if (originalSuccessCallback) {\r\n            return originalSuccessCallback.apply(this, [data, textStatus, jqXHR]);\r\n        }\r\n    };\r\n\r\n    if (options.data instanceof Dms.ajax.formData) {\r\n        options.data = options.data.getNativeFormData();\r\n    }\r\n\r\n    var request = $.ajax(options);\r\n\r\n    var originalDone = request.done;\r\n    request.done = function (callback) {\r\n        originalDone(function (data, textStatus, jqXHR) {\r\n            callback(responseData, textStatus, jqXHR);\r\n        });\r\n    };\r\n\r\n    return request;\r\n};\r\n\r\n","Dms.alerts.add = function (type, title, message, timeout) {\r\n    var alertsList = $('.alerts-list');\r\n    var templates = alertsList.find('.alert-templates');\r\n\r\n\r\n    var alert = templates.find('.alert.alert-' + type).clone(true);\r\n\r\n    if (!message) {\r\n        var typeTitle = type.charAt(0).toUpperCase() + type.slice(1);\r\n\r\n        alert.find('.alert-title').text(typeTitle);\r\n        alert.find('.alert-message').text(title);\r\n    } else {\r\n        alert.find('.alert-title').text(title);\r\n        alert.find('.alert-message').text(message);\r\n    }\r\n\r\n    alertsList.append(alert.hide());\r\n    alert.fadeIn();\r\n\r\n    setTimeout(function () {\r\n        if (alert.is(':visible')) {\r\n            alert.fadeOut();\r\n        }\r\n    }, timeout || 10000);\r\n};\r\n\r\nDms.global.initializeCallbacks.push(function () {\r\n    var flashMessage = Cookies.getJSON('dms-flash-alert');\r\n\r\n    if (flashMessage) {\r\n        Cookies.remove('dms-flash-alert');\r\n\r\n        Dms.alerts.add(flashMessage.type, flashMessage.message);\r\n    }\r\n});","Dms.global.initializeCallbacks.push(function (element) {\r\n    element.find('button[data-a-href]').css('cursor', 'pointer');\r\n\r\n    element.delegate('button[data-a-href]', 'click', function () {\r\n        var button = $(this);\r\n        var link = $('<a/>')\r\n            .attr('href', $(this).attr('data-a-href'))\r\n            .addClass('dms-placeholder-a')\r\n            .hide();\r\n        button.before(link);\r\n        link.click();\r\n    });\r\n\r\n    element.delegate('a[href].dms-placeholder-a', 'click', function () {\r\n        window.location.href = $(this).attr('href');\r\n    });\r\n\r\n    element.find('.btn.btn-active-toggle').on('click', function () {\r\n       $(this).toggleClass('active');\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function () {\r\n    var submitButtons = $('.dms-staged-form, .dms-run-action-form').find('[type=submit].btn-danger')\r\n        .add('a.dms-run-action-form.btn-danger')\r\n        .add('button.dms-run-action-form.btn-danger');\r\n\r\n    submitButtons.click(function (e) {\r\n        var button = $(this);\r\n\r\n        var result = button.triggerHandler('before-confirmation');\r\n        if (result === false) {\r\n            e.stopImmediatePropagation();\r\n            return false;\r\n        }\r\n\r\n        if (button.data('dms-has-confirmed')) {\r\n            button.data('dms-has-confirmed', false);\r\n            return;\r\n        }\r\n\r\n        swal({\r\n            title: \"Are you sure?\",\r\n            type: \"warning\",\r\n            showCancelButton: true,\r\n            confirmButtonColor: \"#DD6B55\",\r\n            confirmButtonText: \"Yes!\"\r\n        }, function () {\r\n            button.data('dms-has-confirmed', true);\r\n            button.click();\r\n        });\r\n\r\n        e.stopImmediatePropagation();\r\n        return false;\r\n    });\r\n});","Dms.utilities.getCsrfHeaders = function () {\r\n    return {\r\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    };\r\n};\r\n\r\nDms.global.initializeCallbacks.push(function () {\r\n    $.ajaxSetup({\r\n        headers: Dms.utilities.getCsrfHeaders()\r\n    });\r\n});","$(document).ready(function () {\r\n    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->\r\n    $.widget.bridge('uibutton', $.ui.button);\r\n});","$.extend({\r\n    replaceTag: function (currentElem, newTagObj, keepProps) {\r\n        var $currentElem = $(currentElem);\r\n        var i, $newTag = $(newTagObj).clone();\r\n        if (keepProps) {//{{{\r\n            newTag = $newTag[0];\r\n            newTag.className = currentElem.className;\r\n            $.extend(newTag.classList, currentElem.classList);\r\n            $.extend(newTag.attributes, currentElem.attributes);\r\n        }//}}}\r\n        $currentElem.wrapAll($newTag);\r\n        $currentElem.contents().unwrap();\r\n        // return node; (Error spotted by Frank van Luijn)\r\n        return this; // Suggested by ColeLawrence\r\n    }\r\n});\r\n\r\n$.fn.extend({\r\n    replaceTag: function (newTagObj, keepProps) {\r\n        // \"return\" suggested by ColeLawrence\r\n        return this.each(function() {\r\n            jQuery.replaceTag(this, newTagObj, keepProps);\r\n        });\r\n    }\r\n});","Dropzone.autoDiscover = false;","var getAbsoluteName = function (allElements, element) {\r\n    var name = element.name;\r\n\r\n    if (name.substr(-2) === '[]') {\r\n        var inputsWithSameNameBefore = allElements\r\n            .filter(function (index, otherElement) {\r\n                return otherElement.name === name;\r\n            })\r\n            .filter(function (index, otherElement) {\r\n                var preceding = 4;\r\n                return otherElement.compareDocumentPosition(element) & preceding;\r\n            });\r\n\r\n        name = name.substr(0, name.length - 2) + '[' + inputsWithSameNameBefore.length + ']';\r\n    }\r\n\r\n    return name;\r\n};\r\n\r\nDms.form.initializeCallbacks.push(function (element) {\r\n    element.find('form').each(function () {\r\n        var form = $(this);\r\n\r\n        var allInputs = form.find(':input');\r\n        form.on('dms-form-updated', function () {\r\n            allInputs = form.find(':input');\r\n        });\r\n\r\n        var changedInputs = {};\r\n        form.data('dms-changed-inputs', changedInputs);\r\n\r\n        form.on('change input', '*[name]:input', function () {\r\n            changedInputs[getAbsoluteName(allInputs, this)] = true;\r\n        })\r\n    });\r\n});\r\n\r\nDms.global.initializeCallbacks.push(function () {\r\n\r\n    $.fn.getValues = function (onlyChanged) {\r\n        var $els = this.find(':input');\r\n        var els = $els.get();\r\n        var changedInputs = $(this).closest('form, .dms-staged-form').data('dms-changed-inputs') || {};\r\n\r\n        var data = {};\r\n\r\n        $.each(els, function () {\r\n            if (this.name && !this.disabled && (this.checked\r\n                || /select|textarea/i.test(this.nodeName)\r\n                || /text|hidden|password/i.test(this.type))) {\r\n                var absoluteName = getAbsoluteName($els, this);\r\n\r\n                if (onlyChanged && !changedInputs[absoluteName]) {\r\n                    return;\r\n                }\r\n\r\n                data[absoluteName] = $(this).val();\r\n            }\r\n        });\r\n\r\n        return data;\r\n    };\r\n\r\n    $.fn.restoreValues = function (data) {\r\n        var $els = this.find(':input');\r\n        var els = $els.get();\r\n\r\n        $.each(els, function () {\r\n            if (!this.name) {\r\n                return;\r\n            }\r\n\r\n            var name = getAbsoluteName($els, this);\r\n\r\n            if (data[name]) {\r\n                var value = data[name];\r\n                var $this = $(this);\r\n\r\n                if (this.type == 'checkbox' || this.type == 'radio') {\r\n                    $this.attr(\"checked\", value === $.val());\r\n                } else {\r\n                    $this.val(value);\r\n                }\r\n            }\r\n        });\r\n\r\n        return this;\r\n    };\r\n});","Dms.form.stages.makeDependentFieldSelectorFor = function (dependentFieldNames, selector, dontAddKnownData) {\r\n    var selectors = [];\r\n\r\n    if (dependentFieldNames) {\r\n        $.each(dependentFieldNames, function (index, fieldName) {\r\n            selectors.push(selector + '[name=\"' + fieldName + '\"]:input');\r\n            selectors.push(selector + '[name^=\"' + fieldName + '[\"][name$=\"]\"]:input');\r\n        });\r\n\r\n        return selectors.join(',');\r\n    } else {\r\n        selectors.push(selector + '[name]:input');\r\n    }\r\n\r\n    if (!dontAddKnownData) {\r\n        selectors.push('.dms-form-stage-known-data ' + selector + ':input');\r\n    }\r\n\r\n    return selectors.join(',');\r\n};\r\n\r\nDms.form.stages.makeDependentFieldSelectorForStageMap = function (stageToDependentFieldMap, selector) {\r\n    var selectors = [];\r\n\r\n    $.each(stageToDependentFieldMap, function (stageNumber, dependentFields) {\r\n        if (dependentFields === '*') {\r\n            selectors.push('.dms-form-stage[data-stage-number=\"' + stageNumber + '\"] :input');\r\n        } else {\r\n            var fieldsInStageSelector = Dms.form.stages.makeDependentFieldSelectorFor(\r\n                dependentFields,\r\n                '.dms-form-stage[data-stage-number=\"' + stageNumber + '\"] *',\r\n                true\r\n            );\r\n\r\n            selectors = selectors.concat(fieldsInStageSelector);\r\n        }\r\n    });\r\n\r\n    selectors.push('.dms-form-stage-known-data ' + selector + ':input');\r\n    return selectors.join(',');\r\n};\r\n\r\nDms.form.stages.createFormDataFromFields = function (fields) {\r\n    var formData = Dms.ajax.createFormData();\r\n\r\n    fields.filter('[name]').each(function () {\r\n        var field = $(this);\r\n        var fieldName = field.attr('name');\r\n\r\n        if (field.is('[type=file]')) {\r\n            $.each(this.files, function (index, file) {\r\n                formData.append(fieldName, file);\r\n            });\r\n        } else if (field.is('[type=checkbox], [type=radio]')) {\r\n            if (field.is(':checked')) {\r\n                formData.append(fieldName, field.val());\r\n            }\r\n        } else {\r\n            formData.append(fieldName, field.val());\r\n        }\r\n    });\r\n\r\n    return formData;\r\n};","Dms.global.initializeCallbacks.push(function () {\r\n    $('a').click(function (e) {\r\n        if ($(this).attr('disabled')) {\r\n            e.stopImmediatePropagation();\r\n\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    });\r\n});","Dms.global.initializeCallbacks.push(function () {\r\n    var navigationFilter = $('.dms-nav-quick-filter');\r\n    var packagesNavigation = $('.dms-packages-nav');\r\n    var navigationSections = packagesNavigation.find('li.treeview');\r\n    var navigationLabels = packagesNavigation.find('.dms-nav-label');\r\n\r\n    navigationFilter.on('input', function () {\r\n        var filterBy = $(this).val();\r\n\r\n        navigationSections.hide();\r\n        var sectionsToShow = [];\r\n        navigationLabels.each(function (index, navItem) {\r\n            navItem = $(navItem);\r\n            var label = navItem.text();\r\n\r\n            var doesContainFilter = label.toLowerCase().indexOf(filterBy.toLowerCase()) !== -1;\r\n            navItem.closest('li').toggle(doesContainFilter);\r\n\r\n            if (doesContainFilter) {\r\n                navItem.closest('ul.treeview-menu').toggle(doesContainFilter).addClass('menu-open');\r\n                navItem.parents('li.treeview').show();\r\n\r\n                if (navItem.is('.dms-nav-label-group')) {\r\n                    sectionsToShow.push(navItem.closest('li.treeview').get(0));\r\n                }\r\n            }\r\n        });\r\n\r\n        $(sectionsToShow).find('li').show();\r\n        $(sectionsToShow).find('ul.treeview-menu').show().addClass('menu-open');\r\n    });\r\n\r\n    navigationFilter.on('keyup', function (event) {\r\n        var enterKey = 13;\r\n\r\n        if (event.keyCode === enterKey) {\r\n            var link = packagesNavigation.find('a[href!=\"javascript:void(0)\"]:visible').first().attr('href');\r\n            window.location.href = link;\r\n        }\r\n    });\r\n});","Dms.utilities.countDecimals = function (value) {\r\n    if (value % 1 != 0) {\r\n        return value.toString().split(\".\")[1].length;\r\n    }\r\n\r\n    return 0;\r\n};\r\n\r\nDms.utilities.idGenerator = function () {\r\n    var S4 = function () {\r\n        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    };\r\n    return 'id' + (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\r\n};\r\n\r\nDms.utilities.combineFieldNames = function (outer, inner) {\r\n    if (inner.indexOf('[') === -1) {\r\n        return outer + '[' + inner + ']';\r\n    }\r\n\r\n    var firstInner = inner.substring(0, inner.indexOf('['));\r\n    var afterFirstInner = inner.substring(inner.indexOf('['));\r\n\r\n    return outer + '[' + firstInner + ']' + afterFirstInner;\r\n};\r\n\r\nDms.utilities.areUrlsEqual = function (first, second) {\r\n    return first.replace(/\\/+$/, '') === second.replace(/\\/+$/, '');\r\n};\r\n\r\nDms.utilities.downloadFileFromUrl = function (url) {\r\n    downloadFile(url);\r\n};\r\n\r\nDms.utilities.isTouchDevice = function () {\r\n    try {\r\n        document.createEvent(\"TouchEvent\");\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n};\r\n\r\nDms.utilities.convertPhpDateFormatToMomentFormat = function (format) {\r\n    var replacements = {\r\n        'd': 'DD',\r\n        'D': 'ddd',\r\n        'j': 'D',\r\n        'l': 'dddd',\r\n        'N': 'E',\r\n        'S': 'o',\r\n        'w': 'e',\r\n        'z': 'DDD',\r\n        'W': 'W',\r\n        'F': 'MMMM',\r\n        'm': 'MM',\r\n        'M': 'MMM',\r\n        'n': 'M',\r\n        'o': 'YYYY',\r\n        'Y': 'YYYY',\r\n        'y': 'YY',\r\n        'a': 'a',\r\n        'A': 'A',\r\n        'g': 'h',\r\n        'G': 'H',\r\n        'h': 'hh',\r\n        'H': 'HH',\r\n        'i': 'mm',\r\n        's': 'ss',\r\n        'u': 'SSS',\r\n        'e': 'zz', // TODO: full timezone id\r\n        'O': 'ZZ',\r\n        'P': 'Z',\r\n        'T': 'zz',\r\n        'U': 'X'\r\n    };\r\n\r\n    var newFormat = '';\r\n\r\n    $.each(format.split(''), function (index, char) {\r\n        if (replacements[char]) {\r\n            newFormat += replacements[char];\r\n        } else {\r\n            newFormat += char;\r\n        }\r\n    });\r\n\r\n    return newFormat;\r\n};","window.Parsley.addValidator('ipAddress', {\r\n    requirementType: 'boolean',\r\n    validateString: function (value) {\r\n        var ipV4Regex = /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.|$)){4}$/;\r\n        var ipV6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\r\n\r\n        if (ipV4Regex.test(value)) {\r\n            return true;\r\n        }\r\n\r\n        if (ipV6Regex.test(value)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    messages: {\r\n        en: 'This value should be a valid ip address'\r\n    }\r\n});\r\n\r\nwindow.Parsley.addValidator('maxDecimalPoints', {\r\n    requirementType: 'integer',\r\n    validateString: function (value, requirement) {\r\n        return Dms.utilities.countDecimals(value) <= requirement;\r\n    },\r\n    messages: {\r\n        en: 'This value should have a maximum of %d decimal places'\r\n    }\r\n});\r\n\r\nwindow.Parsley.addValidator('minElements', {\r\n    requirementType: 'integer',\r\n    validateMultiple: function (value, requirement) {\r\n        return value.length >= requirement;\r\n    },\r\n    messages: {\r\n        en: 'At least %s options must be selected'\r\n    }\r\n});\r\n\r\nwindow.Parsley.addValidator('maxElements', {\r\n    requirementType: 'integer',\r\n    validateMultiple: function (value, requirement) {\r\n        return value.length <= requirement;\r\n    },\r\n    messages: {\r\n        en: 'No more than %s options can be selected'\r\n    }\r\n});\r\n\r\n","Dms.form.validation.initialize = function (form) {\r\n    form.attr('data-parsley-validate', '1');\r\n    return form.parsley(window.ParsleyConfig);\r\n};\r\n\r\nDms.form.validation.clearMessages = function (form) {\r\n    form.find('.form-group').removeClass('has-error');\r\n    form.find('.help-block.help-block-error').remove();\r\n};\r\n\r\nDms.form.validation.displayMessages = function (form, fieldMessages, generalMessages) {\r\n    if (!fieldMessages && !generalMessages) {\r\n        return;\r\n    }\r\n\r\n    var makeHelpBlock = function () {\r\n        return $('<span />').addClass('help-block help-block-error');\r\n    };\r\n\r\n    var helpBlock = makeHelpBlock();\r\n\r\n    $.each(generalMessages, function (index, message) {\r\n        helpBlock.append($('<strong />').text(message));\r\n    });\r\n\r\n    form.prepend(helpBlock);\r\n\r\n    var flattenedFieldMessages = {};\r\n\r\n    var visitMessages = function (fieldName, messages) {\r\n        if ($.isArray(messages)) {\r\n            $.each(messages, function (index, message) {\r\n                if (typeof flattenedFieldMessages[fieldName] === 'undefined') {\r\n                    flattenedFieldMessages[fieldName] = [];\r\n                }\r\n\r\n                flattenedFieldMessages[fieldName].push(message);\r\n            });\r\n        } else {\r\n            $.each(messages.constraints, function (index, message) {\r\n                if (typeof flattenedFieldMessages[fieldName] === 'undefined') {\r\n                    flattenedFieldMessages[fieldName] = [];\r\n                }\r\n\r\n                flattenedFieldMessages[fieldName].push(message);\r\n            });\r\n\r\n            $.each(messages.fields, function (fieldElementName, elementMessages) {\r\n                visitMessages(fieldName + '[' + fieldElementName + ']', elementMessages);\r\n            });\r\n        }\r\n    };\r\n    $.each(fieldMessages, visitMessages);\r\n\r\n    $.each(flattenedFieldMessages, function (fieldName, messages) {\r\n        var fieldGroup = form.find('.form-group[data-field-name=\"' + fieldName + '\"]').add(\r\n            form.find('.form-group *[data-field-validation-for]')\r\n                .filter(function () {\r\n                    return $(this).attr('data-field-validation-for').indexOf(fieldName) !== -1;\r\n                })\r\n                .closest('.form-group')\r\n        );\r\n\r\n        var validationMessagesContainer = fieldGroup.find('.dms-validation-messages-container')\r\n            .filter(function () {\r\n                return $(this).closest('.form-group').is(fieldGroup);\r\n            });\r\n\r\n        var helpBlock = makeHelpBlock();\r\n        $.each($.unique(messages), function (index, message) {\r\n            helpBlock.append($('<p />').append($('<strong />').text(message)));\r\n        });\r\n\r\n        fieldGroup.addClass('has-error');\r\n        validationMessagesContainer.prepend(helpBlock);\r\n    });\r\n};","window.ParsleyConfig = {\r\n    successClass: \"has-success\",\r\n    errorClass: \"has-error\",\r\n    excluded: \"input[type=button], input[type=submit], input[type=reset], input[type=hidden], [disabled], :hidden\",\r\n    classHandler: function (el) {\r\n        return el.$element.closest(\".form-group\");\r\n    },\r\n    errorsWrapper: \"<span class='help-block dms-validation-message'></span>\",\r\n    errorTemplate: \"<span></span>\"\r\n};","Dms.global.initializeCallbacks.push(function () {\r\n    window.Parsley.addCatalog('en', {\r\n        defaultMessage: \"This value seems to be invalid.\",\r\n        type: {\r\n            email: \"This value should be a valid email.\",\r\n            url: \"This value should be a valid url.\",\r\n            number: \"This value should be a valid number.\",\r\n            integer: \"This value should be a valid integer.\",\r\n            digits: \"This value should be digits.\",\r\n            alphanum: \"This value should be alphanumeric.\"\r\n        },\r\n        notblank: \"This value should not be blank.\",\r\n        required: \"This value is required.\",\r\n        pattern: \"This value seems to be invalid.\",\r\n        min: \"This value should be greater than or equal to %s.\",\r\n        max: \"This value should be lower than or equal to %s.\",\r\n        range: \"This value should be between %s and %s.\",\r\n        minlength: \"This value is too short. It should have %s characters or more.\",\r\n        maxlength: \"This value is too long. It should have %s characters or fewer.\",\r\n        length: \"This character length is invalid. It should be between %s and %s characters long.\",\r\n        mincheck: \"You must select at least %s choices.\",\r\n        maxcheck: \"You must select %s choices or fewer.\",\r\n        check: \"You must select between %s and %s choices.\",\r\n        equalto: \"This must match the confirmation field.\"\r\n    }, true);\r\n});","Dms.chart.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('.dms-chart-control').each(function () {\r\n        var control = $(this);\r\n        var chartContainer = control.find('.dms-chart-container');\r\n        var chartElement = chartContainer.find('.dms-chart');\r\n        var chartRangePicker = chartContainer.find('.dms-chart-range-picker');\r\n        var loadChartUrl = control.attr('data-load-chart-url');\r\n\r\n        var criteria = {\r\n            orderings: [],\r\n            conditions: []\r\n        };\r\n\r\n        var currentAjaxRequest;\r\n\r\n        var loadCurrentData = function () {\r\n            chartContainer.addClass('loading');\r\n\r\n            if (currentAjaxRequest) {\r\n                currentAjaxRequest.abort();\r\n            }\r\n\r\n            currentAjaxRequest = Dms.ajax.createRequest({\r\n                url: loadChartUrl,\r\n                type: 'post',\r\n                dataType: 'html',\r\n                data: criteria\r\n            });\r\n\r\n            currentAjaxRequest.done(function (chartData) {\r\n                chartElement.html(chartData);\r\n                Dms.chart.initialize(chartElement);\r\n            });\r\n\r\n            currentAjaxRequest.fail(function () {\r\n                if (currentAjaxRequest.statusText === 'abort') {\r\n                    return;\r\n                }\r\n\r\n                chartContainer.addClass('error');\r\n\r\n                swal({\r\n                    title: \"Could not load chart data\",\r\n                    text: \"An unexpected error occurred\",\r\n                    type: \"error\"\r\n                });\r\n            });\r\n\r\n            currentAjaxRequest.always(function () {\r\n                chartContainer.removeClass('loading');\r\n            });\r\n        };\r\n\r\n        loadCurrentData();\r\n\r\n        chartRangePicker.on('dms-range-updated', function () {\r\n            var horizontalAxis = chartContainer.attr('data-date-axis-name');\r\n            criteria.conditions = [\r\n                {axis: horizontalAxis, operator: '>=', value: chartRangePicker.find('.start-input').val()},\r\n                {axis: horizontalAxis, operator: '<=', value: chartRangePicker.find('.end-input').val()}\r\n            ];\r\n\r\n            loadCurrentData();\r\n        });\r\n    });\r\n});","Dms.chart.initializeCallbacks.push(function (element) {\r\n    element.find('.dms-geo-chart').each(function () {\r\n        var chart = $(this);\r\n        var isCityChart = chart.attr('data-city-chart');\r\n        var hasLatLng = chart.attr('data-has-lat-lng');\r\n        var chartData = JSON.parse(chart.attr('data-chart-data'));\r\n        var region = chart.attr('data-region');\r\n        var locationLabel = chart.attr('data-location-label');\r\n        var valueLabels = JSON.parse(chart.attr('data-value-labels'));\r\n\r\n        google.charts.load('current', {'packages': ['geochart']});\r\n        google.charts.setOnLoadCallback(function () {\r\n            var headers = [];\r\n\r\n            if (hasLatLng) {\r\n                headers.push('Latitude');\r\n                headers.push('Longitude');\r\n            }\r\n\r\n            headers.push(locationLabel);\r\n            headers = headers.concat(valueLabels);\r\n\r\n            var transformedChartData = [headers];\r\n\r\n            $.each(chartData, function (index, row) {\r\n                transformedChartData.push((hasLatLng ? row.lat_lng : []).concat([row.label]).concat(row.values));\r\n            });\r\n\r\n            var data = google.visualization.arrayToDataTable(transformedChartData);\r\n\r\n            var googleChart = new google.visualization.GeoChart(chart.get(0));\r\n\r\n            var drawChart = function () {\r\n                googleChart.draw(data, {\r\n                    displayMode: isCityChart ? 'markers' : 'regions',\r\n                    region: region\r\n                });\r\n            };\r\n\r\n            var resizeTimeoutId;\r\n            $(window).resize(function () {\r\n                if (resizeTimeoutId) {\r\n                    clearTimeout(resizeTimeoutId);\r\n                }\r\n\r\n                resizeTimeoutId = setTimeout(function () {\r\n                    drawChart();\r\n                    resizeTimeoutId = null;\r\n                }, 500);\r\n            });\r\n\r\n            drawChart();\r\n        });\r\n    });\r\n});","Dms.chart.initializeCallbacks.push(function (element) {\r\n    element.find('.dms-graph-chart').each(function () {\r\n        var chart = $(this);\r\n        var dateFormat = Dms.utilities.convertPhpDateFormatToMomentFormat(chart.attr('data-date-format'));\r\n        var chartData = JSON.parse(chart.attr('data-chart-data'));\r\n        var chartType = chart.attr('data-chart-type');\r\n        var horizontalAxisKey = chart.attr('data-horizontal-axis-key');\r\n        var verticalAxisKeys = JSON.parse(chart.attr('data-vertical-axis-keys'));\r\n        var verticalAxisLabels = JSON.parse(chart.attr('data-vertical-axis-labels'));\r\n\r\n        if (!chart.attr('id')) {\r\n            chart.attr('id', Dms.utilities.idGenerator());\r\n        }\r\n\r\n        $.each(chartData, function (index, row) {\r\n            row[horizontalAxisKey] = moment(row[horizontalAxisKey], dateFormat).valueOf();\r\n        });\r\n\r\n        var morrisConfig = {\r\n            element: chart.attr('id'),\r\n            data: chartData,\r\n            xkey: horizontalAxisKey,\r\n            ykeys: verticalAxisKeys,\r\n            labels: verticalAxisLabels,\r\n            resize: true,\r\n            redraw: true,\r\n            dateFormat: function (timestamp) {\r\n                return moment(timestamp).format(dateFormat);\r\n            }\r\n        };\r\n\r\n        var morrisChart;\r\n        if (chartType === 'bar') {\r\n            morrisChart = Morris.Bar(morrisConfig);\r\n        } else if (chartType === 'area') {\r\n            morrisChart = Morris.Area(morrisConfig);\r\n        } else {\r\n            morrisChart = Morris.Line(morrisConfig);\r\n        }\r\n\r\n        $(window).on('resize', function () {\r\n            if (morrisChart.raphael) {\r\n                morrisChart.redraw();\r\n            }\r\n        });\r\n    });\r\n});","Dms.chart.initializeCallbacks.push(function (element) {\r\n    element.find('.dms-pie-chart').each(function () {\r\n        var chart = $(this);\r\n        var chartData = JSON.parse(chart.attr('data-chart-data'));\r\n\r\n        if (!chart.attr('id')) {\r\n            chart.attr('id', Dms.utilities.idGenerator());\r\n        }\r\n\r\n        var morrisChart = Morris.Donut({\r\n            element: chart.attr('id'),\r\n            data: chartData,\r\n            resize: true,\r\n            redraw: true\r\n        });\r\n\r\n        $(window).on('resize', function () {\r\n            if (morrisChart.raphael) {\r\n                morrisChart.redraw();\r\n            }\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('.list-of-checkboxes').each(function () {\r\n        var listOfCheckboxes = $(this);\r\n        listOfCheckboxes.find('input[type=checkbox]').iCheck({\r\n            checkboxClass: 'icheckbox_square-blue',\r\n            increaseArea: '20%'\r\n        });\r\n\r\n        var firstCheckbox = listOfCheckboxes.find('input[type=checkbox]').first();\r\n        firstCheckbox.attr('data-parsley-min-elements', listOfCheckboxes.attr('data-min-elements'));\r\n        firstCheckbox.attr('data-parsley-max-elements', listOfCheckboxes.attr('data-max-elements'));\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('input[type=checkbox].single-checkbox').iCheck({\r\n        checkboxClass: 'icheckbox_square-blue',\r\n        increaseArea: '20%'\r\n    });\r\n\r\n    element.find('input[type=checkbox]').each(function () {\r\n        var formGroup = $(this).closest('.form-group');\r\n\r\n        $(this).on('ifToggled', function(event){\r\n            formGroup.trigger('dms-change');\r\n        });\r\n    });\r\n});","Dms.table.initializeCallbacks.push(function (element) {\r\n    var groupCounter = 0;\r\n\r\n    element.find('.dms-table-body-sortable').each(function () {\r\n        var tableBody = $(this);\r\n        var table = tableBody.closest('.dms-table');\r\n        var control = tableBody.closest('.dms-table-control');\r\n        var reorderRowsUrl = control.attr('data-reorder-row-action-url');\r\n\r\n        var performReorder = function (event) {\r\n            var newIndex = typeof event.newIndex === 'undefined' ? event.oldIndex : event.newIndex;\r\n\r\n            var criteria = control.data('dms-table-criteria');\r\n            var row = $(event.item);\r\n            var objectId = row.find('.dms-row-action-column').attr('data-object-id');\r\n            var reorderButtonHandle = row.find('.dms-drag-handle');\r\n\r\n            var reorderRequest = Dms.ajax.createRequest({\r\n                url: reorderRowsUrl,\r\n                type: 'post',\r\n                dataType: 'html',\r\n                data: {\r\n                    object: objectId,\r\n                    index: criteria.offset + newIndex + 1\r\n                }\r\n            });\r\n\r\n            if (reorderButtonHandle.is('button')) {\r\n                reorderButtonHandle.addClass('ladda-button').attr('data-style', 'expand-right');\r\n                var ladda = Ladda.create(reorderButtonHandle.get(0));\r\n                ladda.start();\r\n\r\n                reorderRequest.always(ladda.stop);\r\n            }\r\n\r\n            reorderRequest.done(function () {\r\n                table.triggerHandler('dms-load-table-data');\r\n            });\r\n\r\n            reorderRequest.fail(function () {\r\n                swal({\r\n                    title: \"Could not reorder item\",\r\n                    text: \"An unexpected error occurred\",\r\n                    type: \"error\"\r\n                });\r\n            });\r\n        };\r\n\r\n        var sortable = new Sortable(tableBody.get(0), {\r\n            group: \"sortable-group\" + groupCounter++,\r\n            sort: true,  // sorting inside list\r\n            animation: 150,  // ms, animation speed moving items when sorting, `0` — without animation\r\n            handle: \".dms-drag-handle\",  // Drag handle selector within list items\r\n            draggable: \"tr\",  // Specifies which items inside the element should be sortable\r\n            ghostClass: \"sortable-ghost\",  // Class name for the drop placeholder\r\n            chosenClass: \"sortable-chosen\",  // Class name for the chosen item\r\n            dataIdAttr: 'data-id',\r\n\r\n            onEnd: performReorder\r\n\r\n        });\r\n    });\r\n});","Dms.table.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('.dms-table-control').each(function () {\r\n        var control = $(this);\r\n        var tableContainer = control.find('.dms-table-container');\r\n        var table = tableContainer.find('table.dms-table');\r\n        var filterForm = control.find('.dms-table-quick-filter-form');\r\n        var rowsPerPageSelect = control.find('.dms-table-rows-per-page-form select');\r\n        var paginationPreviousButton = control.find('.dms-table-pagination .dms-pagination-previous');\r\n        var paginationNextButton = control.find('.dms-table-pagination .dms-pagination-next');\r\n        var loadRowsUrl = control.attr('data-load-rows-url');\r\n        var stringFilterableComponentIds = JSON.parse(control.attr('data-string-filterable-component-ids')) || [];\r\n\r\n        var currentPage = 0;\r\n\r\n        var criteria = {\r\n            orderings: [],\r\n            condition_mode: 'or',\r\n            conditions: [],\r\n            offset: 0,\r\n            max_rows: rowsPerPageSelect.val()\r\n        };\r\n\r\n        var currentAjaxRequest;\r\n\r\n        var loadCurrentPage = function () {\r\n            if (currentAjaxRequest) {\r\n                currentAjaxRequest.abort();\r\n            }\r\n\r\n            tableContainer.addClass('loading');\r\n\r\n            criteria.offset = currentPage * criteria.max_rows;\r\n\r\n            currentAjaxRequest = Dms.ajax.createRequest({\r\n                url: loadRowsUrl,\r\n                type: 'post',\r\n                dataType: 'html',\r\n                data: criteria\r\n            });\r\n\r\n            currentAjaxRequest.done(function (tableData) {\r\n                table.html(tableData);\r\n                Dms.table.initialize(table);\r\n                Dms.form.initialize(table);\r\n\r\n                control.data('dms-table-criteria', criteria);\r\n                control.attr('data-has-loaded-table-data', true);\r\n\r\n                if (table.find('tbody tr').length < criteria.max_rows) {\r\n                    paginationNextButton.addClass('disabled');\r\n                }\r\n            });\r\n\r\n            currentAjaxRequest.fail(function () {\r\n                if (currentAjaxRequest.statusText === 'abort') {\r\n                    return;\r\n                }\r\n\r\n                tableContainer.addClass('has-error');\r\n\r\n                swal({\r\n                    title: \"Could not load table data\",\r\n                    text: \"An unexpected error occurred\",\r\n                    type: \"error\"\r\n                });\r\n            });\r\n\r\n            currentAjaxRequest.always(function () {\r\n                tableContainer.removeClass('loading');\r\n            });\r\n        };\r\n\r\n        filterForm.find('button').click(function () {\r\n            var orderByComponent = filterForm.find('[name=component]').val();\r\n\r\n            if (orderByComponent) {\r\n                criteria.orderings = [\r\n                    {\r\n                        component: orderByComponent,\r\n                        direction: filterForm.find('[name=direction]').val()\r\n                    }\r\n                ];\r\n            } else {\r\n                criteria.orderings = [];\r\n            }\r\n\r\n            criteria.conditions = [];\r\n\r\n            var filterByString = filterForm.find('[name=filter]').val();\r\n\r\n            if (filterByString) {\r\n                $.each(stringFilterableComponentIds, function (index, componentId) {\r\n                    criteria.conditions.push({\r\n                        component: componentId,\r\n                        operator: 'string-contains-case-insensitive',\r\n                        value: filterByString\r\n                    });\r\n                });\r\n            }\r\n\r\n            loadCurrentPage();\r\n        });\r\n\r\n        filterForm.find('input[name=filter]').on('keyup', function (event) {\r\n            var enterKey = 13;\r\n\r\n            if (event.keyCode === enterKey) {\r\n                filterForm.find('button').click();\r\n            }\r\n        });\r\n\r\n        rowsPerPageSelect.on('change', function () {\r\n            criteria.max_rows = $(this).val();\r\n\r\n            loadCurrentPage();\r\n        });\r\n\r\n        paginationPreviousButton.click(function () {\r\n            currentPage--;\r\n            paginationNextButton.removeClass('disabled');\r\n            paginationPreviousButton.toggleClass('disabled', currentPage === 0);\r\n            loadCurrentPage();\r\n        });\r\n\r\n        paginationNextButton.click(function () {\r\n            currentPage++;\r\n            paginationPreviousButton.removeClass('disabled');\r\n            loadCurrentPage();\r\n        });\r\n\r\n        paginationPreviousButton.addClass('disabled');\r\n\r\n        if (table.is(':visible')) {\r\n            loadCurrentPage();\r\n        }\r\n\r\n        table.on('dms-load-table-data', loadCurrentPage);\r\n    });\r\n\r\n    $('.dms-table-tabs').each(function () {\r\n        var tabs = $(this);\r\n\r\n        tabs.find('.dms-table-tab-show-button').on('click', function () {\r\n            var linkedTablePane = $($(this).attr('href'));\r\n\r\n            linkedTablePane.find('.dms-table-control:not([data-has-loaded-table-data]) .dms-table-container:not(.loading) .dms-table').triggerHandler('dms-load-table-data');\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('input.date-or-time')\r\n        .each(function () {\r\n            var inputElement = $(this);\r\n            var formGroup = inputElement.closest('.form-group');\r\n            var phpDateFormat = inputElement.attr('data-date-format');\r\n            var dateFormat = Dms.utilities.convertPhpDateFormatToMomentFormat(phpDateFormat);\r\n            var mode = inputElement.attr('data-mode');\r\n\r\n            var config = {\r\n                locale: {\r\n                    format: dateFormat\r\n                },\r\n                parentEl: inputElement.closest('.date-picker-container'),\r\n                singleDatePicker: true,\r\n                showDropdowns: true,\r\n                autoApply: true,\r\n                linkedCalendars: false,\r\n                autoUpdateInput: false\r\n            };\r\n\r\n            if (mode === 'date-time') {\r\n                config.timePicker = true;\r\n                config.timePickerSeconds = phpDateFormat.indexOf('s') !== -1;\r\n            }\r\n\r\n            if (mode === 'time') {\r\n                config.timePicker = true;\r\n                config.timePickerSeconds = phpDateFormat.indexOf('s') !== -1;\r\n            }\r\n            // TODO: timezoned-date-time\r\n\r\n            inputElement.daterangepicker(config, function (date) {\r\n                inputElement.val(date.format(dateFormat));\r\n            });\r\n\r\n            var picker = inputElement.data('daterangepicker');\r\n\r\n            if (inputElement.val()) {\r\n                picker.setStartDate(inputElement.val());\r\n            }\r\n\r\n            if (mode === 'time') {\r\n                inputElement.closest('.date-picker-container').find('.calendar-table').hide();\r\n            }\r\n            \r\n            inputElement.on('apply.daterangepicker', function () {\r\n                formGroup.trigger('dms-change');\r\n            });\r\n        });\r\n\r\n    element.find('.date-or-time-range')\r\n        .each(function () {\r\n            var rangeElement = $(this);\r\n            var formGroup = rangeElement.closest('.form-group');\r\n            var startInput = rangeElement.find('.start-input');\r\n            var endInput = rangeElement.find('.end-input');\r\n            var dateFormat = Dms.utilities.convertPhpDateFormatToMomentFormat(startInput.attr('data-date-format'));\r\n            var mode = rangeElement.attr('data-mode');\r\n\r\n            var config = {\r\n                locale: {\r\n                    format: dateFormat\r\n                },\r\n                parentEl: rangeElement,\r\n                showDropdowns: true,\r\n                autoApply: !rangeElement.attr('data-dont-auto-apply'),\r\n                linkedCalendars: false,\r\n                autoUpdateInput: false\r\n            };\r\n\r\n            if (mode === 'date-time') {\r\n                config.timePicker = true;\r\n                config.timePickerSeconds = true;\r\n            }\r\n\r\n            if (mode === 'time') {\r\n                config.timePicker = true;\r\n                config.timePickerSeconds = true;\r\n            }\r\n            // TODO: timezoned-date-time\r\n\r\n            startInput.daterangepicker(config, function (start, end, label) {\r\n                startInput.val(start.format(dateFormat));\r\n                endInput.val(end.format(dateFormat));\r\n                rangeElement.triggerHandler('dms-range-updated');\r\n            });\r\n\r\n            var picker = startInput.data('daterangepicker');\r\n\r\n            if (startInput.val()) {\r\n                picker.setStartDate(startInput.val());\r\n            }\r\n            if (endInput.val()) {\r\n                picker.setEndDate(endInput.val());\r\n            }\r\n\r\n            endInput.on('focus click', function () {\r\n                startInput.focus();\r\n            });\r\n\r\n            if (mode === 'time') {\r\n                rangeElement.find('.calendar-table').hide();\r\n            }\r\n\r\n            startInput.on('apply.daterangepicker', function () {\r\n                formGroup.trigger('dms-change');\r\n            });\r\n        });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('.dropzone-container').each(function () {\r\n        var container = $(this);\r\n        var uniqueId = Dms.utilities.idGenerator();\r\n        var form = container.closest('.dms-staged-form');\r\n        var dropzoneElement = container.find('.dms-dropzone');\r\n        var fieldName = container.attr('data-name');\r\n        var required = container.attr('data-required');\r\n        var tempFilePrefix = container.attr('data-temp-file-key-prefix');\r\n        var uploadTempFileUrl = container.attr('data-upload-temp-file-url');\r\n        var maxFileSize = container.attr('data-max-size');\r\n        var maxFiles = container.attr('max-files');\r\n        var existingFiles = JSON.parse(container.attr('data-files') || '[]');\r\n        var isMultiple = container.attr('data-multi-upload');\r\n\r\n        var maxImageWidth = container.attr('data-max-width');\r\n        var minImageWidth = container.attr('data-min-width');\r\n        var maxImageHeight = container.attr('data-max-height');\r\n        var minImageHeight = container.attr('data-min-height');\r\n        var imageEditor = container.find('.dms-image-editor');\r\n\r\n        var getDownloadUrlForFile = function (file) {\r\n            if (file.downloadUrl) {\r\n                return file.downloadUrl;\r\n            }\r\n\r\n            if (file.tempFileToken) {\r\n                return container.attr('data-download-temp-file-url').replace('__token__', file.tempFileToken);\r\n            }\r\n\r\n            return null;\r\n        };\r\n\r\n        var editedImagesQueue = [];\r\n        var isEditingImage = false;\r\n\r\n        var showImageEditor = function (file, saveCallback, alwaysCallback, options) {\r\n\r\n            if (isEditingImage) {\r\n                editedImagesQueue.push(arguments);\r\n                return;\r\n            }\r\n\r\n            isEditingImage = true;\r\n            if (!options) {\r\n                options = {};\r\n            }\r\n\r\n            imageEditor.find('.modal-title').text(options.title || 'Edit Image');\r\n\r\n            var canvasContainer = imageEditor.find('.dms-canvas-container');\r\n\r\n            var imageSrc = getDownloadUrlForFile(file);\r\n\r\n            var loadDarkroom = function (imageSrc) {\r\n                var imageElement = $('<img />').attr('src', imageSrc);\r\n                canvasContainer.append(imageElement);\r\n\r\n                var darkroom = new Darkroom(imageElement.get(0), $.extend({}, {\r\n                    plugins: {\r\n                        save: false // disable plugin\r\n                    },\r\n\r\n                    initialize: function () {\r\n                        imageEditor.modal('show');\r\n                    }\r\n                }, options));\r\n\r\n                imageEditor.find('.btn-save-changes').on('click', function () {\r\n                    var blob = window.dataURLtoBlob(darkroom.canvas.toDataURL());\r\n\r\n                    imageEditor.modal('hide');\r\n\r\n                    blob.name = file.name;\r\n                    saveCallback(blob);\r\n                    alwaysCallback();\r\n                });\r\n\r\n                imageEditor.on('hide.bs.modal', function () {\r\n                    canvasContainer.empty();\r\n                    alwaysCallback();\r\n\r\n                    imageEditor.unbind('hide.bs.modal');\r\n                    imageEditor.find('.btn-save-changes').unbind('click');\r\n\r\n                    isEditingImage = false;\r\n\r\n                    if (editedImagesQueue.length > 0) {\r\n                        showImageEditor.apply(null, editedImagesQueue.pop());\r\n                    }\r\n                });\r\n            };\r\n\r\n            if (imageSrc) {\r\n                loadDarkroom(imageSrc);\r\n            } else {\r\n                var reader = new FileReader();\r\n\r\n                reader.addEventListener(\"load\", function () {\r\n                    loadDarkroom(reader.result);\r\n                }, false);\r\n\r\n                reader.readAsDataURL(file);\r\n            }\r\n        };\r\n\r\n        var acceptedFiles = JSON.parse(container.attr('data-allowed-extensions') || '[]').map(function (extension) {\r\n            return '.' + extension;\r\n        });\r\n\r\n        if (container.attr('data-images-only')) {\r\n            acceptedFiles.push('image/*')\r\n        }\r\n\r\n        dropzoneElement.attr('id', 'dropzone-' + uniqueId);\r\n        var dropzone = new Dropzone('#dropzone-' + uniqueId, {\r\n            url: uploadTempFileUrl,\r\n            paramName: 'file',\r\n            maxFilesize: maxFileSize,\r\n            maxFiles: isMultiple ? maxFiles : 1,\r\n            headers: Dms.utilities.getCsrfHeaders(),\r\n            acceptedFiles: acceptedFiles.join(','),\r\n\r\n            init: function () {\r\n                var dropzone = this;\r\n\r\n                this.on(\"addedfile\", function (file) {\r\n                    var removeButton = Dropzone.createElement(\r\n                        '<button type=\"button\" class=\"btn btn-sm btn-danger btn-remove-file\"><i class=\"fa fa-times\"></i></button>'\r\n                    );\r\n\r\n                    removeButton.addEventListener('click', function (e) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        dropzone.removeFile(file);\r\n\r\n                        if (file.action === 'keep-existing') {\r\n                            file.action = 'delete-existing';\r\n                            updateSubmissionState();\r\n                        }\r\n\r\n                        if (dropzone.options.maxFiles === 0) {\r\n                            dropzone.options.maxFiles++;\r\n                        }\r\n                    });\r\n\r\n                    file.previewElement.appendChild(removeButton);\r\n                });\r\n\r\n                this.on(\"removedfile\", function (file) {\r\n                    if (file.action === 'keep-existing') {\r\n                        file.action = 'delete-existing';\r\n                    }\r\n\r\n                    updateSubmissionState();\r\n                });\r\n\r\n                this.on(\"complete\", function (file) {\r\n                    var downloadButton = Dropzone.createElement(\r\n                        '<button type=\"button\" class=\"btn btn-sm btn-success btn-download-file\"><i class=\"fa fa-download\"></i></button>'\r\n                    );\r\n\r\n                    downloadButton.addEventListener('click', function (e) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        Dms.utilities.downloadFileFromUrl(getDownloadUrlForFile(file));\r\n                    });\r\n\r\n                    file.previewElement.appendChild(downloadButton);\r\n\r\n                    if (file.width && file.height) {\r\n                        var editImageButton = Dropzone.createElement(\r\n                            '<button type=\"button\" class=\"btn btn-sm btn-info btn-edit-file\"><i class=\"fa fa-pencil-square-o\"></i></button>'\r\n                        );\r\n\r\n                        editImageButton.addEventListener('click', function (e) {\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n                            $(editImageButton).prop('disabled', true);\r\n\r\n                            showImageEditor(file, function (newFile) {\r\n                                dropzone.removeFile(file);\r\n\r\n                                if (dropzone.options.maxFiles === 0) {\r\n                                    dropzone.options.maxFiles++;\r\n                                }\r\n\r\n                                dropzone.addFile(newFile);\r\n                            }, function () {\r\n                                $(editImageButton).prop('disabled', false);\r\n                            });\r\n                        });\r\n\r\n                        file.previewElement.appendChild(editImageButton);\r\n                    }\r\n                });\r\n\r\n                this.on('success', function (file, response) {\r\n                    file.action = 'store-new';\r\n                    file.tempFileToken = response.tokens['file'];\r\n                    updateSubmissionState();\r\n                });\r\n\r\n                this.on(\"thumbnail\", function (file) {\r\n                    if (!file.acceptDimensions && !file.rejectDimensions) {\r\n                        return;\r\n                    }\r\n\r\n                    if ((maxImageWidth && file.width > maxImageWidth) || (maxImageHeight && file.height > maxImageHeight)\r\n                        || (minImageWidth && file.width < minImageWidth) || (minImageHeight && file.height < minImageHeight)) {\r\n                        file.rejectDimensions();\r\n                    }\r\n                    else {\r\n                        file.acceptDimensions();\r\n                    }\r\n                });\r\n\r\n                $.each(existingFiles, function (index, existingFile) {\r\n                    existingFile.originalIndex = index;\r\n                    existingFile.action = 'keep-existing';\r\n                    existingFile.tempFileToken = null;\r\n\r\n                    dropzone.emit(\"addedfile\", existingFile);\r\n                    dropzone.createThumbnailFromUrl(existingFile, existingFile.previewUrl);\r\n                    dropzone.emit(\"complete\", existingFile);\r\n\r\n                    if (dropzone.options.maxFiles > 0) {\r\n                        dropzone.options.maxFiles--;\r\n                    }\r\n                });\r\n\r\n            },\r\n\r\n            accept: function (file, done) {\r\n                if (file.type.indexOf('image') === -1) {\r\n                    done();\r\n                }\r\n\r\n                file.acceptDimensions = done;\r\n                file.rejectDimensions = function () {\r\n                    showImageEditor(file, function (editedFile) {\r\n                        dropzone.addFile(editedFile);\r\n                    }, function () {\r\n                        try {\r\n                            dropzone.removeFile(file);\r\n                        } catch (e) {\r\n                        }\r\n                    }, {\r\n                        title: 'The supplied image does not match the required dimensions so it has been resized to: (' + formatRequiredDimensions(file) + ')',\r\n                        minWidth: minImageWidth,\r\n                        minHeight: minImageHeight,\r\n                        maxWidth: maxImageWidth,\r\n                        maxHeight: maxImageHeight\r\n                    })\r\n                };\r\n            }\r\n        });\r\n\r\n        var formatRequiredDimensions = function (file) {\r\n            var min = '', max = '';\r\n\r\n            if (minImageWidth && minImageHeight) {\r\n                min = 'min: ' + minImageWidth + 'x' + minImageHeight + 'px';\r\n            }\r\n            else if (minImageWidth) {\r\n                min = 'min width: ' + minImageWidth + 'px';\r\n            }\r\n            else if (minImageHeight) {\r\n                min = 'min height: ' + minImageHeight + 'px';\r\n            }\r\n\r\n            if (maxImageWidth && maxImageHeight) {\r\n                max = 'max: ' + maxImageWidth + 'x' + maxImageHeight + 'px';\r\n            }\r\n            else if (maxImageWidth) {\r\n                max = 'max width: ' + maxImageWidth + 'px';\r\n            }\r\n            else if (minImageHeight) {\r\n                max = 'max height: ' + minImageHeight + 'px';\r\n            }\r\n\r\n            return (min + ' ' + max).trim();\r\n        };\r\n\r\n        dropzoneElement.addClass('dropzone');\r\n\r\n        var updateSubmissionState = function () {\r\n            form.find('.file-action-' + uniqueId).remove();\r\n            form.find('.file-token-' + uniqueId).remove();\r\n\r\n            var allFiles = [];\r\n\r\n            $.each(existingFiles.concat(dropzone.getAcceptedFiles()), function (index, file) {\r\n                if (file.action === 'delete-existing') {\r\n                    return;\r\n                }\r\n\r\n                if (typeof file.originalIndex !== 'undefined') {\r\n                    allFiles[file.originalIndex] = file;\r\n                    return;\r\n                }\r\n\r\n                while (typeof allFiles[index] !== 'undefined') {\r\n                    index++;\r\n                }\r\n\r\n                allFiles[index] = file;\r\n            });\r\n\r\n            $.each(allFiles, function (index, file) {\r\n                if (!file) {\r\n                    return;\r\n                }\r\n\r\n                var fileFieldName;\r\n                fileFieldName = isMultiple\r\n                    ? fieldName + '[' + index + ']'\r\n                    : fieldName;\r\n\r\n                form.append($('<input />').attr({\r\n                    'class': 'file-action-' + uniqueId,\r\n                    'type': 'hidden',\r\n                    'name': fileFieldName + '[action]',\r\n                    'value': file.action\r\n                }));\r\n\r\n                if (file.tempFileToken) {\r\n                    form.append($('<input />').attr({\r\n                        'class': 'file-token-' + uniqueId,\r\n                        'type': 'hidden',\r\n                        'name': Dms.utilities.combineFieldNames(tempFilePrefix, fileFieldName + '[file]'),\r\n                        'value': file.tempFileToken\r\n                    }));\r\n                }\r\n            });\r\n        };\r\n\r\n        updateSubmissionState();\r\n\r\n        dropzoneElement.closest('.dms-staged-form').on('dms-post-submit-success', function () {\r\n            dropzone.destroy();\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('.dms-inner-form').each(function () {\r\n        var innerForm = $(this);\r\n\r\n        if (innerForm.attr('data-readonly')) {\r\n            innerForm.find(':input').attr('readonly', 'readonly');\r\n        }\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('input.dms-colour-input').each(function () {\r\n        var config = {\r\n            theme: 'bootstrap'\r\n        };\r\n\r\n        if ($(this).hasClass('dms-colour-input-rgb')) {\r\n            config.format = 'rgb';\r\n        } else if ($(this).hasClass('dms-colour-input-rgba')) {\r\n            config.format = 'rgb';\r\n            config.opacity = true;\r\n        }\r\n\r\n        $(this).addClass('minicolors').minicolors(config);\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('.dms-inner-module, .dms-display-inner-module').each(function () {\r\n        var innerModule = $(this);\r\n        var fieldName = innerModule.attr('data-name');\r\n        var rootUrl = innerModule.attr('data-root-url');\r\n        var reloadStateUrl = rootUrl + '/state';\r\n        var innerModuleFormContainer = innerModule.find('.dms-inner-module-form-container');\r\n        var innerModuleForm = innerModuleFormContainer.find('.dms-inner-module-form');\r\n        var formStage = innerModule.closest('.dms-form-stage');\r\n        var stagedForm = innerModule.closest('.dms-staged-form');\r\n        var currentValue = JSON.parse(innerModule.attr('data-value') || '[]');\r\n\r\n        if (innerModule.attr('data-readonly')) {\r\n            innerModule.find(':input').attr('readonly', 'readonly');\r\n        }\r\n\r\n        var getDependentData = function () {\r\n            if (!formStage.is('.dms-dependent-form-stage')) {\r\n                return Dms.ajax.createFormData();\r\n            }\r\n\r\n            var stageToDependentFieldsMap = JSON.parse(stagedForm.attr('data-stage-dependent-fields-stage-map'));\r\n            var dependentFieldsSelector = Dms.form.stages.makeDependentFieldSelectorForStageMap(stageToDependentFieldsMap, '*');\r\n\r\n            return Dms.form.stages.createFormDataFromFields(stagedForm.find(dependentFieldsSelector));\r\n        };\r\n\r\n        var fieldDataPrefix = '__field_action_data';\r\n        var interceptor;\r\n\r\n        Dms.ajax.interceptors.push(interceptor = {\r\n            accepts: function (options) {\r\n                return options.url.indexOf(rootUrl) === 0 && options.url !== reloadStateUrl;\r\n            },\r\n            before: function (options) {\r\n                var formData = getDependentData();\r\n                formData.append(fieldDataPrefix + '[current_state]', JSON.stringify(currentValue));\r\n                formData.append(fieldDataPrefix + '[request][url]', options.url.substring(rootUrl.length));\r\n                formData.append(fieldDataPrefix + '[request][method]', options.__emulatedType || options.type || 'get');\r\n\r\n                var parametersPrefix = fieldDataPrefix + '[request][parameters]';\r\n                $.each(Dms.ajax.parseData(options.data), function (name, entries) {\r\n                    $.each(entries, function (index, entry) {\r\n                        formData.append(Dms.utilities.combineFieldNames(parametersPrefix, name), entry.value, entry.filename);\r\n                    });\r\n                });\r\n\r\n                options.__originalDataType = options.dataType;\r\n                options.dataType = 'json';\r\n                if ((options.type || 'get').toLowerCase() === 'get') {\r\n                    options.data = formData.toQueryString();\r\n                } else {\r\n                    options.processData = false;\r\n                    options.contentType = false;\r\n                    options.data = formData;\r\n                }\r\n            },\r\n            after: function (options, response, data) {\r\n                if (data) {\r\n                    currentValue = data['new_state'];\r\n\r\n                    return Dms.ajax.convertResponse(options.__originalDataType, data.response);\r\n                } else {\r\n                    data = JSON.parse(response.responseText);\r\n                    currentValue = data['new_state'];\r\n\r\n                    response.responseText = data.response;\r\n                    console.log(response.responseText);\r\n                }\r\n            }\r\n        });\r\n\r\n        var originalResponseHandler = Dms.action.responseHandler;\r\n        Dms.action.responseHandler = function (httpStatusCode, actionUrl, response) {\r\n            if (actionUrl.indexOf(rootUrl) !== 0 || httpStatusCode >= 400) {\r\n                originalResponseHandler(httpStatusCode, actionUrl, response);\r\n                return;\r\n            }\r\n\r\n            if (response.redirect) {\r\n                var redirectUrl = response.redirect;\r\n                delete response.redirect;\r\n\r\n                if (!Dms.utilities.areUrlsEqual(redirectUrl, rootUrl)) {\r\n                    loadModulePage(redirectUrl);\r\n                }\r\n            }\r\n\r\n            originalResponseHandler(httpStatusCode, actionUrl, response);\r\n\r\n            innerModule.find('.dms-table-control .dms-table').triggerHandler('dms-load-table-data');\r\n            innerModuleForm.empty();\r\n        };\r\n\r\n        var rootActionUrl = rootUrl + '/action/';\r\n        var currentAjaxRequest;\r\n\r\n        var loadModulePage = function (url) {\r\n            innerModuleFormContainer.addClass('loading');\r\n\r\n            if (currentAjaxRequest) {\r\n                currentAjaxRequest.abort();\r\n            }\r\n\r\n            currentAjaxRequest = Dms.ajax.createRequest({\r\n                url: url,\r\n                type: 'post',\r\n                __emulatedType: 'get',\r\n                dataType: 'html',\r\n                data: {'__content_only': 1}\r\n            });\r\n\r\n            currentAjaxRequest.done(function (html) {\r\n                innerModuleForm.html(html);\r\n                Dms.form.initialize(innerModuleForm);\r\n            });\r\n\r\n            currentAjaxRequest.fail(function () {\r\n                if (currentAjaxRequest.statusText === 'abort') {\r\n                    return;\r\n                }\r\n\r\n                swal({\r\n                    title: \"Could not load form\",\r\n                    text: \"An unexpected error occurred\",\r\n                    type: \"error\"\r\n                });\r\n            });\r\n\r\n            currentAjaxRequest.always(function () {\r\n                innerModuleFormContainer.removeClass('loading');\r\n                currentAjaxRequest = null;\r\n            });\r\n        };\r\n\r\n        innerModule.on('click', 'a[href^=\"' + rootActionUrl + '\"]', function (e) {\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n            var link = $(this);\r\n\r\n            loadModulePage(link.attr('href'));\r\n        });\r\n\r\n        innerModule.closest('.form-group').on('dms-get-input-data', function () {\r\n            var fieldData = {};\r\n            fieldData[fieldName] = currentValue;\r\n            return fieldData;\r\n        });\r\n\r\n        stagedForm.on('dms-post-submit-success', function () {\r\n            Dms.ajax.interceptors.splice(Dms.ajax.interceptors.indexOf(interceptor), 1);\r\n            Dms.action.responseHandler = originalResponseHandler;\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('ul.dms-field-list').each(function () {\r\n        var listOfFields = $(this);\r\n        var form = listOfFields.closest('.dms-staged-form');\r\n        var formGroup = listOfFields.closest('.form-group');\r\n        var templateField = listOfFields.find('.field-list-template');\r\n        var addButton = listOfFields.find('.btn-add-field');\r\n        var isInvalidating = false;\r\n\r\n        var minFields = listOfFields.attr('data-min-elements');\r\n        var maxFields = listOfFields.attr('data-max-elements');\r\n\r\n        var getAmountOfInputs = function () {\r\n            return listOfFields.children('.field-list-item').length;\r\n        };\r\n\r\n        var invalidateControl = function () {\r\n            if (isInvalidating) {\r\n                return;\r\n            }\r\n\r\n            isInvalidating = true;\r\n\r\n            var amountOfInputs = getAmountOfInputs();\r\n\r\n            addButton.prop('disabled', amountOfInputs >= maxFields);\r\n            listOfFields.find('.btn-remove-field').prop('disabled', amountOfInputs <= minFields);\r\n\r\n            while (amountOfInputs < minFields) {\r\n                addNewField();\r\n                amountOfInputs++;\r\n            }\r\n\r\n            isInvalidating = false;\r\n        };\r\n\r\n        var addNewField = function () {\r\n            var newField = templateField.clone()\r\n                .removeClass('field-list-template')\r\n                .removeClass('hidden')\r\n                .removeClass('dms-form-no-submit')\r\n                .addClass('field-list-item');\r\n\r\n            var fieldInputElement = newField.find('.field-list-input');\r\n            fieldInputElement.html(fieldInputElement.text());\r\n\r\n            var currentIndex = getAmountOfInputs();\r\n\r\n            $.each(['name', 'data-name', 'data-field-name'], function (index, attr) {\r\n                fieldInputElement.find('[' + attr + '*=\"::index::\"]').each(function () {\r\n                    $(this).attr(attr, $(this).attr(attr).replace('::index::', currentIndex));\r\n                });\r\n            });\r\n\r\n            addButton.closest('.field-list-add').before(newField);\r\n\r\n            Dms.form.initialize(fieldInputElement);\r\n            form.triggerHandler('dms-form-updated');\r\n\r\n            invalidateControl();\r\n        };\r\n\r\n        listOfFields.on('click', '.btn-remove-field', function () {\r\n            var field = $(this).closest('.field-list-item');\r\n            field.remove();\r\n            formGroup.trigger('dms-change');\r\n            form.triggerHandler('dms-form-updated');\r\n\r\n            invalidateControl();\r\n            // TODO: reindex\r\n        });\r\n\r\n        addButton.on('click', addNewField);\r\n\r\n        invalidateControl();\r\n\r\n        var requiresAnExactAmountOfFields = typeof minFields !== 'undefined' && minFields === maxFields;\r\n        if (requiresAnExactAmountOfFields && getAmountOfInputs() == minFields) {\r\n            addButton.closest('.field-list-add').remove();\r\n            listOfFields.find('.btn-remove-field').closest('.field-list-button-container').remove();\r\n            listOfFields.find('.field-list-input').removeClass('col-xs-10 col-md-11').addClass('col-xs-12');\r\n        }\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    var disableZoomScrollingUntilHoveredFor = function (milliseconds, googleMap) {\r\n        googleMap.set('scrollwheel', false);\r\n        var timeout;\r\n        $(googleMap.getDiv()).hover(function () {\r\n                timeout = setTimeout(function () {\r\n                    googleMap.set('scrollwheel', true);\r\n                }, milliseconds);\r\n            },\r\n            function () {\r\n                clearTimeout(timeout);\r\n                googleMap.set('scrollwheel', false);\r\n            });\r\n    };\r\n\r\n    element.find('.dms-map-input').each(function () {\r\n        var mapInput = $(this);\r\n\r\n        var latitudeInput = mapInput.find('input.dms-lat-input');\r\n        var longitudeInput = mapInput.find('input.dms-lng-input');\r\n        var currentLocationButton = mapInput.find('.dms-current-location');\r\n        var fullAddressInput = mapInput.find('input.dms-full-address-input');\r\n        var addressSearchInput = mapInput.find('input.dms-address-search');\r\n        var mapCanvas = mapInput.find('.dms-map-picker');\r\n        var forceSetAddress = false;\r\n\r\n        var addressPicker = new AddressPicker({\r\n            regionBias: 'AUS',\r\n            map: {\r\n                id: mapCanvas.get(0),\r\n                zoom: 4,\r\n                center: new google.maps.LatLng(\r\n                    latitudeInput.val() || mapInput.attr('data-default-latitude') || -26.4390917,\r\n                    longitudeInput.val() || mapInput.attr('data-default-longitude') || 133.281323), // Default to australia\r\n                mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                draggable: !(mapCanvas.attr('data-no-touch-drag') && Dms.utilities.isTouchDevice())\r\n            },\r\n            marker: {\r\n                draggable: true,\r\n                visible: true\r\n            },\r\n            reverseGeocoding: true,\r\n            autocompleteService: {\r\n                autocompleteService: {\r\n                    types: ['(cities)', '(regions)', 'geocode', 'establishment']\r\n                }\r\n            }\r\n        });\r\n        mapCanvas.data('map-api', addressPicker.getGMap());\r\n\r\n        addressSearchInput.typeahead(null, {\r\n            displayKey: 'description',\r\n            source: addressPicker.ttAdapter()\r\n        });\r\n\r\n        addressSearchInput.bind(\"typeahead:selected\", addressPicker.updateMap);\r\n        addressSearchInput.bind(\"typeahead:cursorchanged\", addressPicker.updateMap);\r\n        addressPicker.bindDefaultTypeaheadEvent(addressSearchInput);\r\n\r\n        $(addressPicker).on('addresspicker:selected', function (event, result) {\r\n            if (!forceSetAddress && addressSearchInput.val() === '') {\r\n                addressSearchInput.typeahead('val', '');\r\n                latitudeInput.val('');\r\n                longitudeInput.val('');\r\n                fullAddressInput.val('');\r\n                return;\r\n            }\r\n\r\n            forceSetAddress = false;\r\n\r\n            if (addressSearchInput.is('[data-map-zoom]')) {\r\n                addressPicker.getGMap().setCenter(new google.maps.LatLng(result.lat(), result.lng()));\r\n                addressPicker.getGMap().setZoom(parseInt(addressSearchInput.attr('data-map-zoom'), 10));\r\n            }\r\n            latitudeInput.val(result.lat());\r\n            longitudeInput.val(result.lng());\r\n            var address = result.address();\r\n\r\n            if (result.placeResult.name) {\r\n                address = result.placeResult.name + ', ' + address;\r\n            }\r\n\r\n            addressSearchInput.val(address);\r\n            fullAddressInput.val(address);\r\n        });\r\n\r\n        google.maps.event.addListener(addressPicker.getGMarker(), \"dragend\", function (event) {\r\n            forceSetAddress = true;\r\n        });\r\n\r\n        if (navigator.geolocation) {\r\n            currentLocationButton.click(function () {\r\n                navigator.geolocation.getCurrentPosition(function (position) {\r\n                    var location = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n                    addressPicker.getGMarker().setPosition(location);\r\n                    addressPicker.getGMap().setCenter(location);\r\n                    // Trigger reverse geocode\r\n                    forceSetAddress = true;\r\n                    addressPicker.markerDragged();\r\n                    addressPicker.getGMap().setZoom(12);\r\n                });\r\n            });\r\n        } else {\r\n            currentLocationButton.prop('disabled', true);\r\n        }\r\n\r\n        if (latitudeInput.val() || longitudeInput.val()) {\r\n            forceSetAddress = true;\r\n            addressPicker.markerDragged();\r\n        }\r\n\r\n        addressSearchInput.change(function () {\r\n            addressPicker.markerDragged();\r\n        });\r\n\r\n        disableZoomScrollingUntilHoveredFor(1000, addressPicker.getGMap());\r\n\r\n        google.maps.event.addListenerOnce(addressPicker.getGMap(), 'idle', function(){\r\n            if (fullAddressInput.val()) {\r\n                addressSearchInput.typeahead('val', fullAddressInput.val());\r\n            }\r\n        });\r\n    });\r\n\r\n    $('.dms-display-map').each(function () {\r\n        var mapCanvas = $(this);\r\n\r\n        var location = new google.maps.LatLng(mapCanvas.attr('data-latitude'), mapCanvas.attr('data-longitude'));\r\n        var map = new google.maps.Map(mapCanvas.get(0), {\r\n            center: location,\r\n            zoom: parseInt(mapCanvas.attr('data-zoom'), 10) || 14,\r\n            scrollwheel: false\r\n        });\r\n\r\n        disableZoomScrollingUntilHoveredFor(1000, map);\r\n\r\n        mapCanvas.data('map-api', map);\r\n\r\n        var marker = new google.maps.Marker({\r\n            position: location,\r\n            map: map,\r\n            title: mapCanvas.attr('data-title')\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('input.dms-money-input').each(function () {\r\n        $(this).attr({\r\n            'type': $(this).attr('step') ? 'number' : 'text',\r\n            'data-parsley-type': 'number'\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('input[type=\"number\"][data-max-decimal-places]').each(function () {\r\n        $(this).attr('data-parsley-max-decimal-places', $(this).attr('data-max-decimal-places'));\r\n    });\r\n\r\n    element.find('input[type=\"number\"][data-greater-than]').each(function () {\r\n        $(this).attr('data-parsley-gt', $(this).attr('data-greater-than'));\r\n    });\r\n\r\n    element.find('input[type=\"number\"][data-less-than]').each(function () {\r\n        $(this).attr('data-parsley-lt', $(this).attr('data-less-than'));\r\n    });\r\n\r\n    element.find('input[type=\"number\"]').each(function () {\r\n        if ($(this).attr('data-decimal-number')) {\r\n            $(this).attr({\r\n                'type': $(this).attr('step') ? 'number' : 'text',\r\n                'data-parsley-type': 'number'\r\n            });\r\n        } else {\r\n            $(this).attr({\r\n                'data-parsley-type': 'integer'\r\n            });\r\n        }\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('select[multiple]').multiselect({\r\n        enableFiltering: true,\r\n        includeSelectAllOption: true\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('input[type=radio]').iCheck({\r\n        radioClass: 'iradio_square-blue',\r\n        increaseArea: '20%'\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    element.find('input[type=\"ip-address\"]')\r\n        .attr('type', 'text')\r\n        .attr('data-parsley-ip-address', '1');\r\n\r\n    element.find('input[data-autocomplete]').each(function () {\r\n        var options = JSON.parse($(this).attr('data-autocomplete'));\r\n        $(this).removeAttr('data-autocomplete');\r\n\r\n        var values = [];\r\n\r\n        $.each(options, function (index, value) {\r\n            values.push({ val: value });\r\n        });\r\n\r\n        var engine = new Bloodhound({\r\n            local: values,\r\n            datumTokenizer: function(d) {\r\n                return Bloodhound.tokenizers.whitespace(d.val);\r\n            },\r\n            queryTokenizer: Bloodhound.tokenizers.whitespace\r\n        });\r\n\r\n        engine.initialize();\r\n\r\n        $(this).typeahead( {\r\n            limit: 5,\r\n            hint: true,\r\n            highlight: true,\r\n            minLength: 1\r\n        }, {\r\n            source: engine.ttAdapter(),\r\n            displayKey: 'val'\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('table.dms-field-table').each(function () {\r\n        var tableOfFields = $(this);\r\n        var form = tableOfFields.closest('.dms-staged-form');\r\n        var formGroup = tableOfFields.closest('.form-group');\r\n\r\n        var columnFieldTemplate = tableOfFields.find('.field-column-template');\r\n        var rowFieldTemplate = tableOfFields.find('.field-row-template');\r\n        var cellFieldTemplate = tableOfFields.find('.field-cell-template');\r\n        var removeRowTemplate = tableOfFields.find('.remove-row-template');\r\n        var removeColumnTemplate = tableOfFields.find('.remove-column-template');\r\n\r\n        var addColumnButton = tableOfFields.find('.btn-add-column');\r\n        var addRowButton = tableOfFields.find('.btn-add-row');\r\n\r\n        var hasPredefinedColumns = tableOfFields.attr('data-has-predefined-columns');\r\n        var hasPredefinedRows = tableOfFields.attr('data-has-predefined-rows');\r\n        var hasRowField = tableOfFields.attr('data-has-row-field');\r\n\r\n        var isInvalidating = false;\r\n\r\n        var minColumns = tableOfFields.attr('data-min-columns') || 1;\r\n        var maxColumns = tableOfFields.attr('data-max-columns');\r\n\r\n        var minRows = tableOfFields.attr('data-min-rows');\r\n        var maxRows = tableOfFields.attr('data-max-rows');\r\n\r\n        var getAmountOfColumns = function () {\r\n            return tableOfFields.find('thead .table-column').length;\r\n        };\r\n\r\n        var getAmountOfRows = function () {\r\n            return tableOfFields.find('tbody .table-row').length;\r\n        };\r\n\r\n        var invalidateControl = function () {\r\n            if (isInvalidating) {\r\n                return;\r\n            }\r\n\r\n            isInvalidating = true;\r\n\r\n            var amountOfColumns = getAmountOfColumns();\r\n            var amountOfRows = getAmountOfRows();\r\n\r\n            addColumnButton.prop('disabled', amountOfColumns >= maxColumns);\r\n            tableOfFields.find('.btn-remove-column').prop('disabled', amountOfColumns <= minColumns);\r\n\r\n            while (amountOfColumns < minColumns) {\r\n                addNewColumn();\r\n                amountOfColumns++;\r\n            }\r\n\r\n            addRowButton.prop('disabled', amountOfRows >= maxRows);\r\n            tableOfFields.find('.btn-remove-row').prop('disabled', amountOfRows <= minRows);\r\n\r\n            while (amountOfRows < minRows) {\r\n                addNewRow();\r\n                amountOfRows++;\r\n            }\r\n\r\n            isInvalidating = false;\r\n        };\r\n\r\n        var createNewCell = function (columnIndex, rowIndex) {\r\n            var newCell = cellFieldTemplate.clone().removeClass('field-cell-template');\r\n\r\n            newCell.html(newCell.text());\r\n\r\n            $.each(['name', 'data-name', 'data-field-name'], function (index, attr) {\r\n                newCell.find('[' + attr + '*=\"::column::\"]').each(function () {\r\n                    $(this).attr(attr, $(this).attr(attr).replace('::column::', columnIndex));\r\n                });\r\n\r\n                newCell.find('[' + attr + '*=\"::row::\"]').each(function () {\r\n                    $(this).attr(attr, $(this).attr(attr).replace('::row::', rowIndex));\r\n                });\r\n            });\r\n\r\n            return newCell;\r\n        };\r\n\r\n        var addNewColumn = function () {\r\n            var newColumnHeader = columnFieldTemplate.clone().removeClass('field-column-template');\r\n\r\n            var fieldContent = newColumnHeader.find('.field-content');\r\n            fieldContent.html(fieldContent.text());\r\n\r\n            var currentRow = 0;\r\n            var currentColumn = getAmountOfColumns();\r\n\r\n            $.each(['name', 'data-name', 'data-field-name'], function (index, attr) {\r\n                newColumnHeader.find('[' + attr + '*=\"::column::\"]').each(function () {\r\n                    $(this).attr(attr, $(this).attr(attr).replace('::column::', currentColumn));\r\n                });\r\n            });\r\n\r\n            var elementsToInit = $(newColumnHeader);\r\n\r\n            addColumnButton.closest('.add-column').before(newColumnHeader);\r\n\r\n            tableOfFields.find('tr.table-row').each(function (index, row) {\r\n                var newCell = createNewCell(currentColumn, currentRow);\r\n\r\n                $(row).find('.add-column').before(newCell);\r\n                elementsToInit.add(newCell);\r\n\r\n                currentRow++;\r\n            });\r\n\r\n            tableOfFields.find('.add-row .add-column').before(removeColumnTemplate.clone().removeClass('remove-column-button'));\r\n\r\n            Dms.form.initialize(elementsToInit);\r\n\r\n            form.triggerHandler('dms-form-updated');\r\n\r\n            invalidateControl();\r\n        };\r\n\r\n        var addNewRow = function () {\r\n            var currentRow = getAmountOfRows();\r\n            var currentColumn = 0;\r\n            var newRow = $('<tr/>').addClass('table-row');\r\n\r\n            if (hasRowField) {\r\n                var newRowHeader = rowFieldTemplate.clone().removeClass('field-row-template');\r\n\r\n                var fieldContent = newRowHeader.find('.field-content');\r\n                fieldContent.html(fieldContent.text());\r\n\r\n                $.each(['name', 'data-name', 'data-field-name'], function (index, attr) {\r\n                    newRowHeader.find('[' + attr + '*=\"::row::\"]').each(function () {\r\n                        $(this).attr(attr, $(this).attr(attr).replace('::row::', currentRow));\r\n                    });\r\n                });\r\n\r\n                newRow.append(newRowHeader);\r\n            }\r\n\r\n            var amountOfColumns = getAmountOfColumns();\r\n            for (currentColumn = 0; currentColumn < amountOfColumns; currentColumn++) {\r\n                newRow.append(createNewCell(currentColumn, currentRow));\r\n            }\r\n\r\n            newRow.append(removeRowTemplate.clone().removeClass('remove-row-template'));\r\n\r\n            tableOfFields.find('tr.add-row').before(newRow);\r\n\r\n            Dms.form.initialize(newRow);\r\n\r\n            form.triggerHandler('dms-form-updated');\r\n\r\n            invalidateControl();\r\n        };\r\n\r\n        tableOfFields.on('click', '.btn-remove-column', function () {\r\n            var parentCell = $(this).closest('td, th');\r\n            var columnIndex = parentCell.prevAll('td, th').length;\r\n            tableOfFields.find('tr').each(function () {\r\n                $(this).find('td:not(.add-column), th:not(.add-column)').eq(columnIndex).remove();\r\n            });\r\n            parentCell.remove();\r\n\r\n            formGroup.trigger('dms-change');\r\n            form.triggerHandler('dms-form-updated');\r\n\r\n            invalidateControl();\r\n            // TODO: reindex\r\n        });\r\n\r\n        tableOfFields.on('click', '.btn-remove-row', function () {\r\n            $(this).closest('tr').remove();\r\n\r\n            formGroup.trigger('dms-change');\r\n            form.triggerHandler('dms-form-updated');\r\n\r\n            invalidateControl();\r\n            // TODO: reindex\r\n        });\r\n\r\n        addColumnButton.on('click', addNewColumn);\r\n        addRowButton.on('click', addNewRow);\r\n\r\n        invalidateControl();\r\n\r\n        var requiresAnExactAmountOfColumns = typeof minColumns !== 'undefined' && minColumns === maxColumns;\r\n        var requiresAnExactAmountOfRows = typeof minRows !== 'undefined' && minRows === maxRows;\r\n\r\n        if (hasPredefinedColumns || (requiresAnExactAmountOfColumns && getAmountOfColumns() == minColumns)) {\r\n            addColumnButton.remove();\r\n            tableOfFields.find('.btn-remove-column').remove();\r\n            tableOfFields.find('.btn-add-column').remove();\r\n        }\r\n\r\n        if (hasPredefinedRows || (requiresAnExactAmountOfRows && getAmountOfRows() == minRows)) {\r\n            addRowButton.remove();\r\n            tableOfFields.find('.btn-remove-row').remove();\r\n            tableOfFields.find('.btn-add-row').remove();\r\n        }\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n    if (typeof tinymce === 'undefined') {\r\n        return;\r\n    }\r\n\r\n    var wysiwygElements = element.find('textarea.dms-wysiwyg');\r\n\r\n    wysiwygElements.each(function () {\r\n        if (!$(this).attr('id')) {\r\n            $(this).attr('id', Dms.utilities.idGenerator());\r\n        }\r\n    });\r\n\r\n    tinymce.init({\r\n        selector: 'textarea.dms-wysiwyg',\r\n        tooltip: '',\r\n        plugins: [\r\n            \"advlist\",\r\n            \"autolink\",\r\n            \"lists\",\r\n            \"link\",\r\n            \"image\",\r\n            \"charmap\",\r\n            \"print\",\r\n            \"preview\",\r\n            \"anchor\",\r\n            \"searchreplace\",\r\n            \"visualblocks\",\r\n            \"code\",\r\n            \"insertdatetime\",\r\n            \"media\",\r\n            \"table\",\r\n            \"contextmenu\",\r\n            \"paste\",\r\n            \"imagetools\"\r\n        ],\r\n        toolbar: \"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image\",\r\n        setup: function (editor) {\r\n            editor.on('change', function () {\r\n                editor.save();\r\n            });\r\n        },\r\n        relative_urls: false,\r\n        convert_urls: false,\r\n        document_base_url: '//' + window.location.host,\r\n        file_picker_callback: function (callback, value, meta) {\r\n            var wysiwygElement = $(tinymce.activeEditor.getElement()).closest('.dms-wysiwyg-container');\r\n            showFilePickerDialog(meta.filetype, wysiwygElement, function (fileUrl) {\r\n                if (fileUrl.indexOf('http://') === 0) {\r\n                    fileUrl = fileUrl.substring('http:'.length);\r\n                } else if (fileUrl.indexOf('https://') === 0) {\r\n                    fileUrl = fileUrl.substring('https:'.length);\r\n                }\r\n\r\n                callback(fileUrl);\r\n            });\r\n        }\r\n    });\r\n\r\n    wysiwygElements.filter(function () {\r\n        return $(this).closest('.mce-tinymce').length === 0;\r\n    }).each(function () {\r\n        tinymce.EditorManager.execCommand('mceAddEditor', true, $(this).attr('id'));\r\n    });\r\n\r\n    wysiwygElements.closest('.dms-staged-form').on('dms-post-submit-success', function () {\r\n        $(this).find('textarea.dms-wysiwyg').each(function () {\r\n            tinymce.remove('#' + $(this).attr('id'));\r\n        });\r\n    });\r\n\r\n    var showFilePickerDialog = function (mode, wysiwygElement, callback) {\r\n        var loadFilePickerUrl = wysiwygElement.attr('data-load-file-picker-url');\r\n        var filePickerDialog = wysiwygElement.find('.dms-file-picker-dialog');\r\n        var filePickerContainer = filePickerDialog.find('.dms-file-picker-container');\r\n        var filePicker = filePickerContainer.find('.dms-file-picker');\r\n\r\n        filePickerDialog.modal('show');\r\n\r\n        var request = Dms.ajax.createRequest({\r\n            url: loadFilePickerUrl,\r\n            type: 'get',\r\n            dataType: 'html',\r\n            data: {'__content_only': '1'}\r\n        });\r\n\r\n        filePickerContainer.addClass('loading');\r\n\r\n        request.done(function (html) {\r\n            filePicker.html(html);\r\n            Dms.table.initialize(filePicker);\r\n            Dms.form.initialize(filePicker);\r\n\r\n            var updateFilePickerButtons = function () {\r\n                filePicker.find('.dms-trashed-files-btn-container').hide();\r\n                var selectFileButton = $('<button class=\"btn btn-success btn-xs\"><i class=\"fa fa-check\"></i></button>');\r\n\r\n                filePicker.find('.dms-file-action-buttons').each(function () {\r\n                    var fileItemButtons = $(this);\r\n\r\n                    var specificFileSelectButton = selectFileButton.clone();\r\n                    fileItemButtons.empty();\r\n                    fileItemButtons.append(specificFileSelectButton);\r\n\r\n                    specificFileSelectButton.on('click', function () {\r\n                        callback(fileItemButtons.closest('.dms-file-item').attr('data-public-url'));\r\n                        filePickerDialog.modal('hide');\r\n                    });\r\n                });\r\n\r\n                if (mode === 'image') {\r\n                    filePicker.find('.btn-images-only').click().focus();\r\n                }\r\n            };\r\n\r\n            filePicker.find('.dms-file-tree').on('dms-file-tree-updated', updateFilePickerButtons);\r\n            updateFilePickerButtons();\r\n        });\r\n\r\n        request.always(function () {\r\n            filePickerContainer.removeClass('loading');\r\n        });\r\n\r\n        filePickerDialog.on('hide.bs.modal', function () {\r\n            filePicker.empty();\r\n        });\r\n    };\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    var fieldCounter = 1;\r\n\r\n    element.find('.dms-form-fieldset .form-group').each(function () {\r\n        var fieldLabel = $(this).children('.dms-label-container label[data-for]');\r\n        var forFieldName = fieldLabel.attr('data-for');\r\n\r\n        if (forFieldName) {\r\n            var forField = $(this).first('*[name=\"' + forFieldName + '\"], .dms-inner-form[data-name=\"' + forFieldName + '\"]');\r\n\r\n            if (!forField.attr('id')) {\r\n                forField.attr('id', 'dms-field-' + fieldCounter);\r\n                fieldCounter++;\r\n            }\r\n\r\n            fieldLabel.attr('for', forField.attr('id'));\r\n        }\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('.dms-staged-form').each(function () {\r\n        var form = $(this);\r\n        var parsley = Dms.form.validation.initialize(form);\r\n        var stageElements = form.find('.dms-form-stage');\r\n\r\n        var arePreviousFieldsValid = function (fields) {\r\n            var originalScroll = $(document).scrollTop();\r\n            var focusedElement = $(document.activeElement);\r\n            parsley.validate();\r\n            focusedElement.focus();\r\n            $(document).scrollTop(originalScroll);\r\n\r\n            return fields.closest('.form-group').find('.dms-validation-message *').length === 0;\r\n        };\r\n\r\n        stageElements.filter('.dms-dependent-form-stage').each(function () {\r\n            var currentStage = $(this);\r\n            var container = currentStage.closest('.dms-form-stage-container');\r\n            var previousStages = container.prevAll('.dms-form-stage-container').find('.dms-form-stage');\r\n            var loadStageUrl = currentStage.attr('data-load-stage-url');\r\n            var dependentFields = currentStage.attr('data-stage-dependent-fields');\r\n            var dependentFieldNames = dependentFields ? JSON.parse(dependentFields) : null;\r\n            var currentAjaxRequest = null;\r\n            var previousLoadAttempt = 0;\r\n            var minMillisecondsBetweenLoads = 2000;\r\n            var isWaitingForNextLoadAttempt = false;\r\n\r\n            var makeDependentFieldSelectorFor = function (selector) {\r\n                return Dms.form.stages.makeDependentFieldSelectorFor(dependentFieldNames, selector);\r\n            };\r\n\r\n            var loadNextStage = function () {\r\n\r\n                if (currentAjaxRequest) {\r\n                    currentAjaxRequest.abort();\r\n                }\r\n\r\n                if (dependentFieldNames) {\r\n                    var hasLoadedAllRequiredFields = true;\r\n\r\n                    $.each(dependentFieldNames, function (index, fieldName) {\r\n                        if (previousStages.find(Dms.form.stages.makeDependentFieldSelectorFor([fieldName], '*')).length === 0) {\r\n                            hasLoadedAllRequiredFields = false;\r\n                        }\r\n                    });\r\n\r\n                    if (!hasLoadedAllRequiredFields) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                container.removeClass('loaded');\r\n                container.addClass('loading');\r\n\r\n                var currentTime = new Date().getTime();\r\n                var millisecondsBetweenLastLoad = currentTime - previousLoadAttempt;\r\n\r\n                if (millisecondsBetweenLastLoad >= minMillisecondsBetweenLoads) {\r\n                    isWaitingForNextLoadAttempt = false;\r\n                    previousLoadAttempt = currentTime;\r\n                }\r\n                else {\r\n                    if (!isWaitingForNextLoadAttempt) {\r\n                        isWaitingForNextLoadAttempt = true;\r\n                        setTimeout(loadNextStage, minMillisecondsBetweenLoads - millisecondsBetweenLastLoad);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                var previousFields = previousStages.find(makeDependentFieldSelectorFor('*'));\r\n\r\n                if (!arePreviousFieldsValid(previousFields)) {\r\n                    container.removeClass('loading');\r\n                    return;\r\n                }\r\n\r\n                Dms.form.validation.clearMessages(form);\r\n\r\n                var formData = Dms.form.stages.createFormDataFromFields(previousFields);\r\n\r\n                currentAjaxRequest = Dms.ajax.createRequest({\r\n                    url: loadStageUrl,\r\n                    type: 'post',\r\n                    processData: false,\r\n                    contentType: false,\r\n                    dataType: 'html',\r\n                    data: formData\r\n                });\r\n\r\n                currentAjaxRequest.done(function (html) {\r\n                    container.addClass('loaded');\r\n                    var currentValues = currentStage.getValues(true);\r\n                    currentStage.html(html);\r\n                    Dms.form.initialize(currentStage);\r\n                    currentStage.restoreValues(currentValues);\r\n                    form.triggerHandler('dms-form-updated');\r\n                });\r\n\r\n                currentAjaxRequest.fail(function (xhr) {\r\n                    if (currentAjaxRequest.statusText === 'abort') {\r\n                        return;\r\n                    }\r\n\r\n                    switch (xhr.status) {\r\n                        case 422: // Unprocessable Entity (validation failure)\r\n                            var validation = JSON.parse(xhr.responseText);\r\n                            Dms.form.validation.displayMessages(form, validation.messages.fields, validation.messages.constraints);\r\n                            break;\r\n\r\n                        case 400: // Bad request\r\n                            swal({\r\n                                title: \"Could not load form\",\r\n                                text: JSON.parse(xhr.responseText).message,\r\n                                type: \"error\"\r\n                            });\r\n                            break;\r\n\r\n                        default: // Unknown error\r\n                            swal({\r\n                                title: \"Could not load form\",\r\n                                text: \"An unexpected error occurred\",\r\n                                type: \"error\"\r\n                            });\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                currentAjaxRequest.always(function () {\r\n                    container.removeClass('loading');\r\n                });\r\n            };\r\n\r\n            previousStages.on('input', makeDependentFieldSelectorFor('input'), loadNextStage);\r\n            previousStages.on('input', makeDependentFieldSelectorFor('textarea'), loadNextStage);\r\n            previousStages.on('change', makeDependentFieldSelectorFor('select'), loadNextStage);\r\n\r\n            if (dependentFieldNames) {\r\n                var selectors = [];\r\n                $.each(dependentFieldNames, function (index, fieldName) {\r\n                    selectors.push('.form-group[data-field-name=\"' + fieldName + '\"]');\r\n                });\r\n\r\n                previousStages.on('dms-change', selectors.join(','), loadNextStage);\r\n            } else {\r\n                previousStages.on('dms-change', '.form-group[data-field-name]', loadNextStage);\r\n            }\r\n        });\r\n    });\r\n});","Dms.form.initializeCallbacks.push(function (element) {\r\n\r\n    element.find('.dms-staged-form, .dms-run-action-form').each(function () {\r\n        var form = $(this);\r\n        var formContainer = form.closest('.dms-staged-form-container');\r\n        var parsley = Dms.form.validation.initialize(form);\r\n        var afterRunCallbacks = [];\r\n        var submitButtons = form.find('input[type=submit], button[type=submit]');\r\n        var submitMethod = form.attr('data-method');\r\n        var submitUrl = form.attr('data-action');\r\n        var reloadFormUrl = form.attr('data-reload-form-url');\r\n\r\n        if ($(this).is('a.dms-run-action-form, button.dms-run-action-form')) {\r\n            submitButtons = submitButtons.add(this);\r\n        }\r\n\r\n        var isFormValid = function () {\r\n            return parsley.isValid()\r\n                && form.find('.dms-validation-message *').length === 0\r\n                && form.find('.dms-form-stage-container').length === form.find('.dms-form-stage-container.loaded').length;\r\n        };\r\n\r\n        submitButtons.on('click before-confirmation', function (e) {\r\n            parsley.validate();\r\n\r\n            if (!isFormValid()) {\r\n                e.stopImmediatePropagation();\r\n                form.find('.dms-form-stage-container:not(.loaded)').addClass('has-error');\r\n                return false;\r\n            }\r\n        });\r\n\r\n        submitButtons.on('click', function (e) {\r\n            e.preventDefault();\r\n\r\n            Dms.form.validation.clearMessages(form);\r\n\r\n            form.triggerHandler('dms-before-submit');\r\n\r\n            var fieldsToReappend = [];\r\n            form.find('.dms-form-no-submit').each(function () {\r\n                var removedFields = $(this).children().detach();\r\n\r\n                fieldsToReappend.push({\r\n                    parentElement: $(this),\r\n                    children: removedFields\r\n                });\r\n            });\r\n\r\n            var formData =  Dms.form.stages.createFormDataFromFields(form.find(':input'));\r\n            form.find('.form-group').each(function () {\r\n                var additionalDataToSubmit = $(this).triggerHandler('dms-get-input-data');\r\n\r\n                if (additionalDataToSubmit) {\r\n                    $.each(Dms.ajax.parseData(additionalDataToSubmit), function (name, entries) {\r\n                        $.each(entries, function (index, entry) {\r\n                            formData.append(name, entry.value, entry.filename);\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n\r\n            $.each(fieldsToReappend, function (index, elements) {\r\n                elements.parentElement.append(elements.children);\r\n            });\r\n\r\n            submitButtons.prop('disabled', true);\r\n            submitButtons.addClass('ladda-button').attr('data-style', 'expand-right');\r\n            var ladda = Ladda.create(submitButtons.get(0));\r\n            ladda.start();\r\n\r\n            var currentAjaxRequest = Dms.ajax.createRequest({\r\n                url: submitUrl,\r\n                type: submitMethod,\r\n                processData: false,\r\n                contentType: false,\r\n                dataType: 'json',\r\n                data: formData,\r\n                xhr: function () {\r\n                    var xhr = $.ajaxSettings.xhr();\r\n\r\n                    if (form.find('input[type=file]').length && xhr.upload) {\r\n                        xhr.upload.addEventListener('progress', function (event) {\r\n                            if (event.lengthComputable) {\r\n                                ladda.setProgress(event.loaded / event.total);\r\n                            }\r\n                        }, false);\r\n                    }\r\n\r\n                    return xhr;\r\n                }\r\n            });\r\n\r\n            currentAjaxRequest.done(function (data, statusText, xhr) {\r\n                Dms.action.responseHandler(xhr.status, submitUrl, data);\r\n                $.each(afterRunCallbacks, function (index, callback) {\r\n                    callback(data);\r\n                });\r\n\r\n                form.triggerHandler('dms-post-submit-success');\r\n            });\r\n\r\n            currentAjaxRequest.fail(function (xhr) {\r\n                if (currentAjaxRequest.statusText === 'abort') {\r\n                    return;\r\n                }\r\n\r\n                switch (xhr.status) {\r\n                    case 401: // Unauthorized\r\n                        swal({\r\n                            title: \"Could not perform action\",\r\n                            text: \"You do not possess the necessary permissions to authorize this action\",\r\n                            type: \"error\"\r\n                        });\r\n                        break;\r\n\r\n                    case 422: // Unprocessable Entity (validation failure)\r\n                        var validation = JSON.parse(xhr.responseText);\r\n                        Dms.form.validation.displayMessages(form, validation.messages.fields, validation.messages.constraints);\r\n                        break;\r\n\r\n                    default:\r\n                        try {\r\n                            var response = JSON.parse(xhr.responseText);\r\n                            Dms.action.responseHandler(xhr.status, submitUrl, response);\r\n                        } catch (e) {\r\n                            // Unknown error\r\n                            swal({\r\n                                title: \"Could not submit form\",\r\n                                text: \"An unexpected error occurred\",\r\n                                type: \"error\"\r\n                            });\r\n                            break;\r\n                        }\r\n                }\r\n            });\r\n\r\n            currentAjaxRequest.always(function () {\r\n                submitButtons.prop('disabled', false);\r\n                ladda.stop();\r\n            });\r\n\r\n            return false;\r\n        });\r\n\r\n        var parentToRemove = form.attr('data-after-run-remove-closest');\r\n        if (parentToRemove) {\r\n            afterRunCallbacks.push(function () {\r\n                form.closest(parentToRemove).fadeOut(100);\r\n            });\r\n        }\r\n\r\n        if ( form.attr('data-after-run-refresh')) {\r\n            afterRunCallbacks.push(function () {\r\n                window.location.reload(true);\r\n            });\r\n        }\r\n\r\n        afterRunCallbacks.push(function () {\r\n            form.find('input[type=password]').val('');\r\n        });\r\n\r\n        afterRunCallbacks.push(function (data) {\r\n            if (data.redirect || !form.is('.dms-staged-form')) {\r\n                return;\r\n            }\r\n\r\n            var request = Dms.ajax.createRequest({\r\n                url: reloadFormUrl,\r\n                type: 'get',\r\n                dataType: 'html',\r\n                data: {'__content_only': '1'}\r\n            });\r\n\r\n            formContainer.addClass('loading');\r\n\r\n            request.done(function (html) {\r\n                var newForm = $(html).find('.dms-staged-form').first();\r\n                form.replaceWith(newForm);\r\n                Dms.form.initialize(newForm.parent());\r\n                Dms.table.initialize(newForm.parent());\r\n            });\r\n\r\n            request.always(function () {\r\n                formContainer.removeClass('loading');\r\n            });\r\n        });\r\n    });\r\n});","Dms.form.initializeValidationCallbacks.push(function (element) {\r\n\r\n    element.find('.dms-form-fields').each(function () {\r\n        if (!$(this).attr('id')) {\r\n            $(this).attr('id', Dms.utilities.idGenerator());\r\n        }\r\n    });\r\n\r\n    element.find('.dms-form-fields').each(function () {\r\n        var formFieldSection = $(this);\r\n        var formFieldsGroupId = formFieldSection.attr('id');\r\n\r\n\r\n        var buildElementSelector = function (fieldName) {\r\n            return '#' + formFieldsGroupId + ' *[name=\"' + fieldName + '\"]';\r\n        };\r\n\r\n        var fieldValidations = {\r\n            'data-equal-fields': 'data-parsley-equalto',\r\n            'data-greater-than-fields': 'data-parsley-gt',\r\n            'data-greater-than-or-equal-fields': 'data-parsley-gte',\r\n            'data-less-than-fields': 'data-parsley-lt',\r\n            'data-less-than-or-equal-fields': 'data-parsley-lte'\r\n        };\r\n\r\n        $.each(fieldValidations, function (validationAttr, parsleyAttr) {\r\n            var fieldsMap = formFieldSection.attr(validationAttr);\r\n\r\n            if (fieldsMap) {\r\n                $.each(JSON.parse(fieldsMap), function (fieldName, otherFieldName) {\r\n                    var field = $(buildElementSelector(fieldName));\r\n                    field.attr(parsleyAttr, buildElementSelector(otherFieldName));\r\n                });\r\n            }\r\n        });\r\n    });\r\n\r\n    element.find('.dms-staged-form').each(function () {\r\n        var form = $(this);\r\n        var parsley = Dms.form.validation.initialize(form);\r\n\r\n        form.find('.dms-form-fields').each(function (index) {\r\n            $(this).find(':input').attr('data-parsley-group', 'validation-group-' + index);\r\n        });\r\n    });\r\n\r\n    element.find('.dms-form').each(function () {\r\n        var form = $(this);\r\n        var parsley = Dms.form.validation.initialize(form);\r\n    });\r\n});","Dms.widget.initializeCallbacks.push(function () {\r\n    $('.dms-widget-unparameterized-action, .dms-widget-parameterized-action').each(function () {\r\n        var widget = $(this);\r\n        var button = widget.find('button');\r\n\r\n        if (button.is('.btn-danger')) {\r\n            var isConfirmed = false;\r\n\r\n            button.click(function () {\r\n                if (isConfirmed) {\r\n                    isConfirmed = false;\r\n                    return;\r\n                }\r\n\r\n                swal({\r\n                    title: \"Are you sure?\",\r\n                    text: \"This will execute the '\" + widget.attr('data-action-label') + \"' action\",\r\n                    type: \"warning\",\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: \"#DD6B55\",\r\n                    confirmButtonText: \"Yes proceed!\"\r\n                }, function () {\r\n                    isConfirmed = true;\r\n                    $(this).click();\r\n                });\r\n\r\n                return false;\r\n            });\r\n        }\r\n    });\r\n});","Dms.table.initializeCallbacks.push(function (element) {\r\n    element.find('.dms-file-tree').each(function () {\r\n        var fileTree = $(this);\r\n        var allFileTrees = fileTree.find('.dms-file-tree-data');\r\n        var fileTreeData = fileTree.find('.dms-file-tree-data.dms-file-tree-data-active');\r\n        var trashedFileTreeData = fileTree.find('.dms-file-tree-data.dms-file-tree-data-trash');\r\n        var filterForm = fileTree.find('.dms-quick-filter-form');\r\n        var reloadFileTreeUrl = fileTree.attr('data-reload-file-tree-url');\r\n\r\n        var initializeFileTreeData = function (fileTreeData) {\r\n            var folderItems = fileTreeData.find('.dms-folder-item');\r\n            var fileItems = fileTreeData.find('.dms-file-item');\r\n\r\n            fileTree.find('.dms-folder-item').on('click', function (e) {\r\n                if ($(e.target).is('.dms-file-item, .dms-file-item *')) {\r\n                    return;\r\n                }\r\n\r\n                e.stopImmediatePropagation();\r\n                $(this).toggleClass('dms-folder-closed');\r\n            });\r\n\r\n            filterForm.find('input[name=filter]').on('change input', function () {\r\n                var filterBy = $(this).val();\r\n\r\n                folderItems.hide().addClass('.dms-folder-closed');\r\n                fileItems.each(function (index, fileItem) {\r\n                    fileItem = $(fileItem);\r\n                    var label = fileItem.text();\r\n\r\n                    var doesContainFilter = label.toLowerCase().indexOf(filterBy.toLowerCase()) !== -1;\r\n                    fileItem.toggleClass('hidden', !doesContainFilter || fileItem.hasClass('hidden-file-item'));\r\n\r\n                    if (doesContainFilter) {\r\n                        fileItem.parents('.dms-folder-item').removeClass('dms-folder-closed').show();\r\n                    }\r\n                });\r\n\r\n                hideEmptyFolders(fileTreeData);\r\n            });\r\n\r\n            hideEmptyFolders(fileTreeData);\r\n        };\r\n\r\n        var hideEmptyFolders = function (fileTreeData) {\r\n            fileTreeData.find('.dms-folder-item').each(function () {\r\n                $(this).toggle($(this).find('.dms-file-item:not(.hidden)').length > 0);\r\n            });\r\n        };\r\n\r\n        element.find('.dms-upload-form .dms-staged-form').on('dms-post-submit-success', function () {\r\n            var fileTreeContainer = fileTree.find('.dms-file-tree-data-container');\r\n\r\n            var request = Dms.ajax.createRequest({\r\n                url: reloadFileTreeUrl,\r\n                type: 'get',\r\n                dataType: 'html',\r\n                data: {'__content_only': '1'}\r\n            });\r\n\r\n            fileTreeContainer.addClass('loading');\r\n\r\n            request.done(function (html) {\r\n                var newFileTrees = $(html).find('.dms-file-tree-data');\r\n                var newActiveFileTree = newFileTrees.filter('.dms-file-tree-data-active');\r\n                fileTreeData.replaceWith(newActiveFileTree);\r\n                var newTrashedFileTree = newFileTrees.filter('.dms-file-tree-data-trashed');\r\n                trashedFileTreeData.replaceWith(newTrashedFileTree);\r\n                initializeFileTreeData(newActiveFileTree.parent());\r\n                initializeFileTreeData(newTrashedFileTree.parent());\r\n\r\n                Dms.form.initialize(newActiveFileTree.parent());\r\n                Dms.form.initialize(newTrashedFileTree.parent());\r\n\r\n                allFileTrees = newFileTrees;\r\n                fileTreeData = newActiveFileTree;\r\n                trashedFileTreeData = newTrashedFileTree;\r\n\r\n                fileTree.triggerHandler('dms-file-tree-updated');\r\n            });\r\n\r\n            request.always(function () {\r\n                fileTreeContainer.removeClass('loading');\r\n            });\r\n        });\r\n\r\n        fileTree.find('.btn-images-only').on('click', function () {\r\n            allFileTrees.find('.dms-file-item:not(.dms-image-item)').addClass('hidden').addClass('hidden-file-item');\r\n            hideEmptyFolders(allFileTrees);\r\n        });\r\n\r\n        fileTree.find('.btn-all-files').on('click', function () {\r\n            allFileTrees.find('.dms-file-item').removeClass('hidden').removeClass('hidden-file-item');\r\n            hideEmptyFolders(allFileTrees);\r\n        });\r\n\r\n        fileTree.find('.btn-trashed-files').on('click', function () {\r\n            fileTreeData.toggleClass('hidden');\r\n            trashedFileTreeData.toggleClass('hidden');\r\n        });\r\n\r\n        fileTree.find('.btn-group > .btn').click(function(){\r\n            $(this).addClass('active').siblings().removeClass('active');\r\n        });\r\n\r\n        allFileTrees.each(function () {\r\n            initializeFileTreeData($(this));\r\n        });\r\n    });\r\n});\r\n"],"sourceRoot":"/source/"}